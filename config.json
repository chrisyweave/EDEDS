{"id":"bda82572-c63b-48cc-ab93-8c18a3ee85ff","version":"1.0.0","icon":"icon06","splash":"default","splashdata":{},"settings":{"router":{"mode":"single","animation":"off"},"theme":"default","push-notifications":{"android":{"enabled":false},"ios":{"enabled":false},"wp":{"enabled":false}},"provisioning":{"enabled":false,"manifest":"","poll":2,"manual":false,"wifionly":true},"crashReporting":{"enabled":false,"androidEnabled":false,"iosEnabled":false,"splunkAndroidApiKey":"","splunkIosApiKey":"","splunkExtraData":""},"kioskMode":{"enabled":false},"logging":{"enabled":false,"bufferFrequency":100,"defaultRootLogLevel":"error","defaultMaxFileSizeKilobyte":1000,"defaultMaxFiles":5,"appEnabled":true,"appUseDefault":true,"appRootLogLevel":"error","appMaxFileSizeKilobyte":1000,"appMaxFiles":5,"clientEnabled":true,"clientUseDefault":true,"clientRootLogLevel":"error","clientMaxFileSizeKilobyte":1000,"clientMaxFiles":5,"nativeEnabled":true,"nativeUseDefault":true,"nativeRootLogLevel":"error","nativeMaxFileSizeKilobyte":1000,"nativeMaxFiles":5},"loading-message":true,"minimise-on-back-button":false,"plugins":{"builtIn":{"cordova-plugin-whitelist@1.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-battery-status@1.1.2":{"override":false,"used":false,"enabled":false},"cordova-plugin-console@1.0.3":{"override":false,"used":true,"enabled":true},"cordova-plugin-contacts@2.1.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-device@1.1.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-device-motion@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-device-orientation@1.0.3":{"override":false,"used":false,"enabled":false},"cordova-plugin-file@4.2.0":{"override":false,"used":true,"enabled":true},"cordova-plugin-geolocation@2.2.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-globalization@1.0.3":{"override":false,"used":true,"enabled":true},"commontime-cordova-plugin-inappbrowser@1.6.2":{"override":false,"used":false,"enabled":false},"cordova-plugin-network-information@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-splashscreen@3.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-vibration@2.1.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-statusbar@1.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.1":{"override":false,"used":false,"enabled":false},"phonegap-plugin-barcodescanner@6.0.4":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.thumbnail@1.4.8":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.fileimporter@1.0.0":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-opener@1.0.8":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.beacon@1.0.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.notification@1.0.11":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.audio@0.9.10":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.media-properties@1.2.11":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.splitscreen@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.preferences@1.0.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.authentication@1.0.8":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.urlhandler@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.securesettings@1.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.geofence@0.5.0":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-transfer@1.5.5":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.public.provisioning@0.0.13":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.insomnia@0.0.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.splunk-mint@1.0.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.kiosk@1.0.11":{"override":false,"used":false,"enabled":false},"cordova-android-movetasktoback@0.1.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.logging@1.0.24":{"override":false,"used":true,"enabled":true},"cordova-plugin-email":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.public.messaging@0.0.44":{"override":false,"used":false,"enabled":false},"cordova-plugin-battery-status@1.2.4":{"override":false,"used":false,"enabled":false},"cordova-plugin-network-information@2.0.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-vibration@2.1.6-dev-ct-0.0.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-media-capture@1.4.1":{"override":false,"used":false,"enabled":false},"phonegap-plugin-barcodescanner@6.0.7":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.thumbnail@1.4.10":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.fileimporter@1.0.4":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-opener@1.0.13":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.notification@1.0.17":{"override":false,"used":false,"enabled":false},"https://github.com/commontime/cordova-ios-voip-push@1.0.4":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.audio@0.9.26":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.media-properties@1.2.13":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.preferences@0.0.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.securesettings@1.0.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.geofence@0.5.5":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.insomnia@0.0.43":{"override":false,"used":false,"enabled":false},"cordova-plugin-email-composer":{"override":false,"used":true,"enabled":true},"cordova-android-crosswalk-webview@2.3.0":{"override":false,"enabled":false},"cordova-plugin-wkwebview-engine@1.1.4":{"override":false,"enabled":false},"cordova-plugin-wkwebview-file-xhr@2.1.1":{"override":false,"enabled":false},"cordova-plugin-emm-app-config@1.0.2":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-encryption@0.0.12":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.public.messaging@0.0.47":{"override":false,"used":false,"enabled":false},"cordova-plugin-splashscreen@5.0.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-screen-orientation@1.4.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-opener@1.0.14":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.notification@1.0.21":{"override":false,"used":false,"enabled":false},"https://github.com/commontime/cordova-ios-voip-push@1.0.2":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.audio@0.9.23":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-transfer@1.5.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.insomnia@0.0.33":{"override":false,"used":false,"enabled":false},"cordova-plugin-ionic-webview@1.1.16":{"override":false,"enabled":false},"com.commontime.cordova.file-encryption@0.0.7":{"override":false,"used":false,"enabled":false}},"customPlugins":{}}},"language":{"defaultLocale":"en_GB","initialLanguage":"","useDeviceLocale":true},"metadata":{},"name":"MedsAllergiesv9","packageId":"com.commontime.infinity.Test","schemaVersion":29,"minimumStudioVersion":"3.2.0","pages":[{"start":false,"name":"PatientSearch","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"089000b6-efef-4e2e-8141-e329712e0598","actions":[{"type":"if","data":{},"_auto_id_":"4c09bf8a-2b6b-4492-ac74-967cae26ee3d","operations":[{"type":"value","content":"{{$store.variables.Username}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"","$selected":false}]},{"event":"onpageload","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"2358e35a-7997-4b1a-89e2-bf77216bf4d0"},{"type":"end-if","data":{},"_auto_id_":"40cc9bf5-dd64-457f-8193-559e564783d1"},{"event":"onpageload","type":"set-variable","data":{"name":"page","value":"Search"},"_auto_id_":"1ab2333a-d8e8-4977-b4ee-a545fb81a3b9"},{"event":"onpageload","type":"call-api","data":{"sync":true,"name":"Form","operation":"GetEDList"},"_auto_id_":"8703233d-2a9c-4619-bd06-86ac0e16a2eb","actions":[]}]}],"content":[{"name":"titBarEDMedsAllergies","type":"area","item-type":"title-bar","_auto_id_":"bf1eb1ea-ecaa-4a53-9b52-14bbe11eee4a","extends":{"type":"area","item-type":"row"},"content":[{"name":"titEDMedsAllergies","type":"content","item-type":"title","_auto_id_":"a23fb286-f9ff-4c68-b453-8bd6ebd56d80","content":"<h1>Discharge Medications & Allergies</h1>","expressions":{}}],"expressions":{},"classes":"MainTitle"},{"name":"scrollable_13","type":"area","item-type":"scrollable","_auto_id_":"4fc5b2ac-6970-4176-8e9c-ee9c5d8bd5a9","content":[{"name":"dgEDList","type":"content","item-type":"data-grid","_auto_id_":"a1c8188c-e1bc-4b34-a9f4-3a565249a165","content":[{"name":"dgUnitNbr","type":"content","item-type":"data-grid-column","_auto_id_":"0dc5ce6a-15d8-4580-b607-c14a64ce1989","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Hospital Number","key":"UNIT_NBR"},{"name":"dgPatName","type":"content","item-type":"data-grid-column","_auto_id_":"cf77def3-8a8a-4e0f-9348-55c1edf9da2f","dataType":"string","sortable":true,"sort":"asc","editable":false,"key":"PAT_NAME","heading":"Patient Name"},{"name":"dgPostCode","type":"content","item-type":"data-grid-column","_auto_id_":"e165f972-31fd-4348-816b-48125f22ff7a","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Post Code","key":"PAT_ZIP"},{"name":"dgSex","type":"content","item-type":"data-grid-column","_auto_id_":"062fcd38-617e-410b-80ba-ef0eedebe958","dataType":"string","sortable":false,"sort":"","editable":false,"key":"PAT_SEX","heading":"Gender"},{"name":"dgDOB","type":"content","item-type":"data-grid-column","_auto_id_":"e78b394f-6c8c-42f0-9b7c-59db2dddfa29","dataType":"date","sortable":true,"sort":"","editable":false,"key":"BIRTHDATE","heading":"Date of Birth"},{"name":"dgForm","type":"content","item-type":"data-grid-column","_auto_id_":"4897c920-24d4-41dd-a77c-d4f130ce8e1d","dataType":"datetime","sortable":true,"sort":"","editable":false,"heading":"Form","key":"attendanceDate","useDisplayKey":true,"displayKey":"dateAdded"}],"sourceType":"dynamic","showSearch":"true","fixedHeaders":"true","usePagination":"true","pageSize":"10","showPagination":"true","useLocalInteraction":"false","dataSourceMethod":"GET","selectionMode":"Row","expressions":{},"model":"$store.api.Form.GetEDList","actions":[{"event":"selection","type":"set-variable","data":{"name":"formID","value":"{{$data.rowData.formID}}"},"_auto_id_":"ef85a3d3-733b-4e0f-81df-8c57ec7d8afc"},{"event":"selection","type":"set-variable","data":{"name":"manor","value":"{{$data.rowData.UNIT_NBR}}"},"_auto_id_":"d363f8b2-ff01-4392-a2f1-369e0b453c28"},{"event":"selection","type":"call-api","data":{"sync":true,"name":"Demographics","operation":"EDMpiDemogs","params":{"manor":"{{$store.variables.manor}}"}},"_auto_id_":"9554a60f-2c2e-48f7-ac5a-77040f40bb0b","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"Graphnet","operation":"GetGraphnetAllergies"},"_auto_id_":"64f8da43-3711-4f80-be31-70962dec4ddd","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"Graphnet","operation":"GetGraphnetMeds"},"_auto_id_":"f170feb0-6f8b-4c5d-b0c8-7494b99ce6a1","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"Graphnet","operation":"GetGraphnetRepMeds"},"_auto_id_":"12bb7df8-ea3c-4850-8580-85844446cdc7","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"//Repeat Medications\ncti.store.variables.MedsArray = [];\ncti.store.variables.RepMedsArray = [];\nvar RepMedData = cti.store.api.Graphnet.GetGraphnetRepMeds;\nvar medication_repeat = [];\t\nvar StringRep = \"\";\nfor (i in RepMedData.GpRepeatMedicationsList) {\n\t\t\t\t\tRepMedsDate = RepMedData.GpRepeatMedicationsList[i].Date;\n\t\t\t\t\tRepReadCode = RepMedData.GpRepeatMedicationsList[i].ReadCode;\n\t\t\t\t\tRepRubric = RepMedData.GpRepeatMedicationsList[i].Rubric;\n\t\t\t\t\tRepRubric = RepRubric.replace(\",\", \"\");\n\t\t\t\t\tRepQuantity = RepMedData.GpRepeatMedicationsList[i].Quantity;\n\t\t\t\t\tRepDosage = RepMedData.GpRepeatMedicationsList[i].Dosage;\n\t\t\t\t\tLastIssueDate = RepMedData.GpRepeatMedicationsList[i].LastIssuedDate;\n\t\t\t\t\tRepMedsDate = new Date(RepMedsDate);\n\n\t\t\t\t\tif($.inArray(RepRubric, medication_repeat) !== -1) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tmedication_repeat.push(RepRubric);\n\t\t\t\t\t\tcti.store.variables.medicationrepeat = medication_repeat;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar dd = RepMedsDate.getDate();\n\t\t\t\t\tvar mm = RepMedsDate.getMonth() + 1;\n\t\t\t\t\tvar yyyy = RepMedsDate.getFullYear();\n\t\t\t\t\tif (dd < 10) {\n\t\t\t\t\t\tdd = '0' + dd;\n\t\t\t\t\t}\n\t\t\t\t\tif (mm < 10) {\n\t\t\t\t\t\tmm = '0' + mm;\n\t\t\t\t\t}\n\t\t\t\t\tRepMedsDate = dd + '/' + mm + '/' + yyyy;\n\t\t\t\t\tLastIssueDate = new Date(LastIssueDate);\n\t\t\t\t\tvar dd = LastIssueDate.getDate();\n\t\t\t\t\tvar mm = LastIssueDate.getMonth() + 1;\n\t\t\t\t\tvar yyyy = LastIssueDate.getFullYear();\n\t\t\t\t\tif (dd < 10) {\n\t\t\t\t\t\tdd = '0' + dd;\n\t\t\t\t\t}\n\t\t\t\t\tif (mm < 10) {\n\t\t\t\t\t\tmm = '0' + mm;\n\t\t\t\t\t}\n\t\t\t\t\tLastIssueDate = dd + '/' + mm + '/' + yyyy;\n\t\t\t\t\tvar d = new Date(); // today date\n\t\t\t\t\td.setMonth(d.getMonth() - 6); //subtract 6 month from current date \n\t\t\t\t\tvar dd = d.getDate();\n\t\t\t\t\tvar mm = d.getMonth() + 1;\n\t\t\t\t\tvar yyyy = d.getFullYear();\n\t\t\t\t\tif (dd < 10) {\n\t\t\t\t\t\tdd = '0' + dd;\n\t\t\t\t\t}\n\t\t\t\t\tif (mm < 10) {\n\t\t\t\t\t\tmm = '0' + mm;\n\t\t\t\t\t}\n\t\t\t\t\td = dd + '/' + mm + '/' + yyyy;\n\t\t\t\t\tvar str1 = RepMedsDate;\n\t\t\t\t\tvar str2 = d;\n\t\t\t\t\tvar dt1 = parseInt(str1.substring(0, 2), 10);\n\t\t\t\t\tvar mon1 = parseInt(str1.substring(3, 5), 10);\n\t\t\t\t\tvar yr1 = parseInt(str1.substring(6, 10), 10);\n\t\t\t\t\tvar dt2 = parseInt(str2.substring(0, 2), 10);\n\t\t\t\t\tvar mon2 = parseInt(str2.substring(3, 5), 10);\n\t\t\t\t\tvar yr2 = parseInt(str2.substring(6, 10), 10);\n\t\t\t\t\tvar medication_date_repeat = new Date(yr1, mon1, dt1);\n\t\t\t\t\tvar todays_date_repeat = new Date(yr2, mon2, dt2);\n\t\t\t\t\tif (todays_date_repeat < medication_date_repeat) {\n\t\t\t\t\t\tcti.store.variables.Rubric = RepRubric;\n\t\t\t\t\t\tcti.store.variables.RepMedsDate = RepMedsDate;\n\t\t\t\t\t\tcti.store.variables.RepQuantity = RepQuantity;\n\t\t\t\t\t\tcti.store.variables.RepDosage = RepDosage;\n\t\t\t\t\t\tcti.store.variables.RepMedsArray.push({\"Rubric\":RepRubric,\"MedsDate\":RepMedsDate,\"Quantity\":RepQuantity,\"Dosage\":RepDosage});\n\t\t\t\t\t\tStringRep += \" \"+RepRubric\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n//Medications\ncti.store.variables.GPAllergies = cti.store.api.Graphnet.GetGraphnetAllergies;\nvar MedData = cti.store.api.Graphnet.GetGraphnetMeds;\nvar medication_issued = [];\t\nfor (j in MedData.GpResultsCollection) {\n\t\t\t\t\tmedsDate = MedData.GpResultsCollection[j].Date;\n\t\t\t\t\tmedsDate = medsDate.replace(\",\", \"\");\n\t\t\t\t\tReadCode = MedData.GpResultsCollection[j].ReadCode;\n\t\t\t\t\tReadCode = ReadCode.replace(\",\", \"\");\n\t\t\t\t\tRubric = MedData.GpResultsCollection[j].Rubric;\n\t\t\t\t\tRubric = Rubric.replace(\",\", \"\");\n\t\t\t\t\tQuantity = MedData.GpResultsCollection[j].Quantity;\n\t\t\t\t\tQuantity = Quantity.replace(\",\", \"\");\n\t\t\t\t\tDosage = MedData.GpResultsCollection[j].Dosage;\n\t\t\t\t\tDosage = Dosage.replace(\",\", \"\");\n\n\t\t\t\t\t// This will skip a record if the medication has already appeared.\n\t\t\t\t\t// Push the medication to an array\n\t\t\t\t\tif($.inArray(Rubric, medication_issued) !== -1) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tmedication_issued.push(Rubric);\n\t\t\t\t\t}\n\n\t\t\t\t\t// MEDICATION DATE IN JSON\n\t\t\t\t\tmedsDate = new Date(medsDate);\n\t\t\t\t\tvar dd = medsDate.getDate();\n\t\t\t\t\tvar mm = medsDate.getMonth() + 1;\n\t\t\t\t\tvar yyyy = medsDate.getFullYear();\n\t\t\t\t\tif (dd < 10) {\n\t\t\t\t\t\tdd = '0' + dd;\n\t\t\t\t\t}\n\t\t\t\t\tif (mm < 10) {\n\t\t\t\t\t\tmm = '0' + mm;\n\t\t\t\t\t}\n\t\t\t\t\tmedsDate = dd + '/' + mm + '/' + yyyy;\n\t\t\t\t\tvar str1 = medsDate;\n\t\t\t\t\tvar dt1 = parseInt(str1.substring(0, 2), 10);\n\t\t\t\t\tvar mon1 = parseInt(str1.substring(3, 5), 10);\n\t\t\t\t\tvar yr1 = parseInt(str1.substring(6, 10), 10);\n\t\t\t\t\tvar medication_date_issue = new Date(yr1, mon1, dt1);\n\n\t\t\t\t\t// TODAY DATE\n\t\t\t\t\tvar d = new Date(); // today date\n\t\t\t\t\td.setMonth(d.getMonth() - 6); //subtract 6 month from current date \n\t\t\t\t\tvar dd = d.getDate();\n\t\t\t\t\tvar mm = d.getMonth() + 1;\n\t\t\t\t\tvar yyyy = d.getFullYear();\n\t\t\t\t\tif (dd < 10) {\n\t\t\t\t\t\tdd = '0' + dd;\n\t\t\t\t\t}\n\t\t\t\t\tif (mm < 10) {\n\t\t\t\t\t\tmm = '0' + mm;\n\t\t\t\t\t}\n\t\t\t\t\td = dd + '/' + mm + '/' + yyyy;\n\t\t\t\t\tvar str2 = d;\n\t\t\t\t\tvar dt2 = parseInt(str2.substring(0, 2), 10);\n\t\t\t\t\tvar mon2 = parseInt(str2.substring(3, 5), 10);\n\t\t\t\t\tvar yr2 = parseInt(str2.substring(6, 10), 10);\n\t\t\t\t\tvar todays_date_issue = new Date(yr2, mon2, dt2);\n\n\t\t\t\t\t// IF TODAYS DATE IS LESS THAN THE MEDICATION DATE\n\t\t\t\t\tif (todays_date_issue < medication_date_issue) {\n\t\t\t\t\t\tif (StringRep != undefined) {\n\t\t\t\t\t\t\tvar n = StringRep.indexOf(Rubric);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tn = -1\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (n < 0) {\n\t\t\t\t\t\tcti.store.variables.MedsArray.push({\"Rubric\":Rubric,\"MedsDate\":medsDate,\"Quantity\":Quantity,\"Dosage\":Dosage});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n$success();"},"_auto_id_":"923c1aa6-bd03-413d-ada0-b46f48f53be7","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"Form","operation":"edEDSGetFormData","params":{"formID":"{{$store.variables.formID}}","manor":"{{$store.variables.manor}}"}},"_auto_id_":"3e31539d-83f2-46be-a39b-d4f1d3a70131","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.Comments = [];\ncti.store.pages.Comments.txtComments = \"\";\ncti.store.variables.EDMeds = [];\ncti.store.variables.TTOMeds = [];\ncti.store.variables.PrescMeds = [];\ncti.store.variables.EDAllergies = [];\nif (cti.store.api.Form.edEDSGetFormData.length != 0){\ncti.store.pages.Comments.txtComments = cti.store.api.Form.edEDSGetFormData[0].Comments;\ncti.store.variables.EDMeds = JSON.parse(cti.store.api.Form.edEDSGetFormData[0].EDMeds);\ncti.store.variables.TTOMeds = JSON.parse(cti.store.api.Form.edEDSGetFormData[0].TTOMeds);\ncti.store.variables.PrescMeds = JSON.parse(cti.store.api.Form.edEDSGetFormData[0].PrescMeds);\ncti.store.variables.EDAllergies = JSON.parse(cti.store.api.Form.edEDSGetFormData[0].Allergies);\n}\n$success()"},"_auto_id_":"4f97ae1b-5ce1-41a4-b15e-ed3608cd04b6","actions":[{"event":"success","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"a5450731-c57a-42b5-9733-5094ee0e8c66"}]}]}]}]}]}]}]}]}],"expressions":{}}]},{"start":false,"name":"Medications","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"49bb455a-339d-4b94-9e52-1f9c5f2f642d","actions":[{"type":"if","data":{},"_auto_id_":"62217d15-fe5f-4019-b9f9-c7f245a01d52","operations":[{"type":"value","content":"{{$store.variables.Username}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"","$selected":false}]},{"event":"onpageload","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"56983ef3-c397-4720-81e0-37183f012d05"},{"type":"end-if","data":{},"_auto_id_":"80b9719c-d682-44b0-baf9-1cb9db45f0d4"},{"event":"onpageload","type":"call-api","data":{"sync":true,"name":"Demographics","operation":"EDMpiDemogs","params":{"manor":"{{$store.variables.manor}}"}},"_auto_id_":"df2ad247-ffc0-4388-9f62-591629721bcb","actions":[]}]}],"content":[{"name":"scrollPatBanner","type":"area","item-type":"scrollable","content":[{"name":"htmlPatBanner","type":"content","item-type":"html","_auto_id_":"469d6ea8-a24c-49b3-b4a0-57386cfe4abf","content":"<div class=\"container\">\n<table width=\"100%\" border=\"1\">\n  <tr>\n    <th width=\"70%\">{{'$store.api.Demographics.EDMpiDemogs[0].PAT_NAME_LAST' | store}},{{'$store.api.Demographics.EDMpiDemogs[0].PAT_NAME_FIRST' | store}}</th>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"19%\">ManorNumber&nbsp;{{'$store.api.Demographics.EDMpiDemogs[0].UNIT_NBR' | store}}</td>\n    <td width=\"8%\"><div class=\"md-button-container ng-isolate-scope\" id=\"butBack\" right-icon=\"fa fa-close\" name=\"butBack\" type=\"button\" item-type=\"button\" theme=\"default\" md-expressions=\"{}\" originalname=\"butBack\"><a id=\"butBack\" class=\"btn btn-default\" ng-disabled=\"disabled\" onclick = \"cti.utils.callAction('go-to-page', {'name': 'PatientSearch'})\"><span class=\"fa fa-close\"></span></a></div></td>\n  </tr>\n  <tr>\n    <td>BORN {{'$store.api.Demographics.EDMpiDemogs[0].BIRTHDATE' | store}} &nbsp;&nbsp;&nbsp;&nbsp;Gender {{'$store.api.Demographics.EDMpiDemogs[0].PAT_SEX' | store}}</td>\n    <td>&nbsp;</td>\n    <td>&nbsp;</td>\n    <td>NHSNumber&nbsp;{{'$store.api.Demographics.EDMpiDemogs[0].PAT_SSN' | store}}</td>\n    <td><div class=\"md-button-container ng-isolate-scope\" id=\"butExpand\" data-toggle=\"collapse\" data-target=\"#demo\" right-icon=\"fa-arrow-circle-o-down\" name=\"butExpand\" type=\"button\" item-type=\"button\" theme=\"default\" actions=\"[]\" md-expressions=\"{}\" originalname=\"butExpand\">  <a id=\"butExpand\" class=\"btn btn-default \" md-actions=\"[]\" ng-disabled=\"disabled\"> <span class=\"fa fa-arrow-circle-o-down\"></span></a></div></td>\n  </tr>\n</table>\n<div id=\"demo\" class=\"collapse\">\n<table width=\"100%\" border=\"1\">\n  <tr>\n    <td width=\"36%\" style=\"\n    font-weight: bold;\n\">Address</td>\n    <td width=\"36%\" style=\"\n    font-weight: bold;\n\">Contact</td>\n    <td width=\"20%\" align=\"center\" style=\"\n    font-weight: bold;\n\">GP Details</td>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"5%\"></td>\n  </tr>\n</table>\n<table width=\"100%\" border=\"1\">\n  <tr>\n    <td width=\"36%\">{{'$store.api.Demographics.EDMpiDemogs[0].PAT_ADDR1' | store}}</td>\n    <td width=\"36%\">Home Number {{'$store.api.Demographics.EDMpiDemogs[0].PHONE_NBR' | store}}</td>\n    <td width=\"20%\" align=\"center\">GP {{'$store.api.Demographics.EDMpiDemogs[0].GPName' | store}}</td>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"5%\">&nbsp;</td>\n  </tr>\n  <tr>\n    <td>{{'$store.api.Demographics.EDMpiDemogs[0].PAT_ZIP' | store}}</td>\n    <td>Mobile Number {{'$store.api.Demographics.EDMpiDemogs[0].PAT_MOBILE' | store}}</td>\n    <td align=\"center\">GP Address {{'$store.api.Demographics.EDMpiDemogs[0].GPAddress' | store}}</td>\n    <td>&nbsp;</td>\n    <td>&nbsp;</td>\n  </tr>\n</table>\n</div>\n</div>","expressions":{},"classes":"PatBanner"}],"_auto_id_":"45b12146-0ec6-41ca-8a75-0ec103a7e5da","expressions":{},"classes":""},{"name":"scrollable_5","type":"area","item-type":"scrollable","_auto_id_":"2816ef0a-764f-4c27-8d67-a99199d88b92","content":[{"name":"titEDMeds","type":"content","item-type":"title","_auto_id_":"a6a48c25-c4fe-4a91-a912-63770b1ef9d6","content":"<h3>Medication given in ED</h3>","expressions":{}},{"name":"dgEDMeds","type":"content","item-type":"data-grid","_auto_id_":"8b9d21ca-087c-49aa-be56-9afc61b5985a","content":[{"name":"dgEDDate","type":"content","item-type":"data-grid-column","_auto_id_":"c80f48dc-8c7a-4cf6-900f-7045671b8e12","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Date","key":"Date"},{"name":"dgEDDrug","type":"content","item-type":"data-grid-column","_auto_id_":"9f386734-1df6-4741-91be-a17683ec8ec1","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Drug","key":"Drug"},{"name":"dgEDRoute","type":"content","item-type":"data-grid-column","_auto_id_":"c0d1f686-8d99-4a8d-a070-c1e316845c05","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Route","key":"Route"},{"name":"dgEDSite","type":"content","item-type":"data-grid-column","_auto_id_":"3a063398-4472-454f-8950-a9e3c265e193","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Site","key":"Site"},{"name":"dgEDDose","type":"content","item-type":"data-grid-column","_auto_id_":"edd09ef8-334f-41d4-a3ed-cdf57005924e","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Dose","key":"Dose","width":""},{"name":"dgEDUnit","type":"content","item-type":"data-grid-column","_auto_id_":"1776b4ee-d92d-4f43-9222-3ffafa98fc79","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Unit","key":"Unit","width":""},{"name":"dgFreq","type":"content","item-type":"data-grid-column","_auto_id_":"c9be5ed2-07e4-45a1-97df-885ca2a97625","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Frequency","key":"Freq"},{"name":"dgEDComments","type":"content","item-type":"data-grid-column","_auto_id_":"a085d1d9-832e-4491-8f04-2c9be81eab8f","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Comments","key":"Comments"},{"name":"dgEDPrescribed","type":"content","item-type":"data-grid-column","_auto_id_":"f5316f24-0301-4d6b-a68f-b061a7ae15fc","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Precribed By","key":"PrescribeName"},{"name":"dgEDAdmin","type":"content","item-type":"data-grid-column","_auto_id_":"74b45fa2-0dcf-41c1-82f3-002c8ae5193d","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Administered By","key":"AdminName"},{"name":"dgEDChecked","type":"content","item-type":"data-grid-column","_auto_id_":"e4d3a695-7453-40c4-b837-b7ceffa63274","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Checked By","key":"CheckedName"}],"sourceType":"dynamic","showSearch":"false","fixedHeaders":"true","usePagination":"true","pageSize":"10","showPagination":"true","useLocalInteraction":"false","dataSourceMethod":"GET","selectionMode":"Row","model":"$store.variables.EDMeds","actions":[{"event":"selection","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.EDMedID = $data.rowData.EDMedID;\ncti.store.variables.Route = $data.rowData.Route;\ncti.store.variables.Site = $data.rowData.Site;\ncti.store.variables.Dose = $data.rowData.Dose;\ncti.store.variables.Unit = $data.rowData.Unit;\ncti.store.variables.Freq = $data.rowData.Freq;\ncti.store.variables.Comments = $data.rowData.Comments;\ncti.store.variables.Drug = $data.rowData.Drug;\ncti.store.variables.EDDate = $data.rowData.Date;\ncti.store.variables.PrescribeName = $data.rowData.PrescribeName;\ncti.store.variables.AdminName = $data.rowData.AdminName;\ncti.store.variables.CheckedName = $data.rowData.CheckedName;\ncti.store.variables.sigChecked = $data.rowData.CheckedSig;\ncti.store.pages.EditEDMeds = [];\ncti.store.pages.EditEDMeds.dtGivenMeds = [];\ncti.store.pages.EditEDMeds.selRoute = [];\ncti.store.pages.EditEDMeds.txtSite = \"\";\ncti.store.pages.EditEDMeds.numDose = \"\";\ncti.store.pages.EditEDMeds.selUnits = [];\ncti.store.pages.EditEDMeds.txtFreq = \"\";\ncti.store.pages.EditEDMeds.txtComments = \"\";\ncti.store.pages.EditEDMeds.txtPrescribeName = \"\";\ncti.store.pages.EditEDMeds.txtAdminName = \"\";\ncti.store.pages.EditEDMeds.txtCheckedName = \"\";\ncti.store.pages.EditEDMeds.sigChecked = \"\";\n$success();"},"_auto_id_":"4c17b269-7162-4407-be95-484e1e68ce3a","actions":[{"event":"success","type":"go-to-page","data":{"name":"EditEDMeds","isConditional":false},"_auto_id_":"3041c151-a41b-4954-97d2-f2e10efaa77f"}]}],"expressions":{},"autoSaveEdits":false},{"name":"butAddEDMed","type":"button","item-type":"button","_auto_id_":"d9e56d79-9070-4bb5-bf49-4f3e25bda0d8","content":"Add New","theme":"default","left-icon":"fa-plus-square","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.AddEDMeds = [];\ncti.store.pages.AddEDMeds.dtGivenMeds = [];\ncti.store.pages.AddEDMeds.txtRoute = \"\";\ncti.store.pages.AddEDMeds.txtSite = \"\";\ncti.store.pages.AddEDMeds.txtFreq = \"\";\ncti.store.pages.AddEDMeds.txtDose = \"\";\ncti.store.pages.AddEDMeds.txtComments = \"\";\ncti.store.pages.AddEDMeds.txtPrescribeName = \"\";\ncti.store.pages.AddEDMeds.txtAdminName = \"\";\ncti.store.pages.AddEDMeds.txtCheckedName = \"\";\ncti.store.pages.AddEDMeds.sigPrescribe = \"\";\ncti.store.pages.AddEDMeds.sigAdmin = \"\";\ncti.store.pages.AddEDMeds.sigChecked = \"\";\n$success()"},"_auto_id_":"163828b1-ac58-469f-b609-8d19721065cc","actions":[{"event":"success","type":"go-to-page","data":{"name":"AddEDMeds","isConditional":false},"_auto_id_":"0f3d49be-27a3-46d3-8cfe-5a2465b4395d"}]}],"classes":"addMeds"},{"name":"titTTOMeds","type":"content","item-type":"title","_auto_id_":"3a1d1d55-b485-41c9-a098-ee16b56693b7","content":"<h3>To take home Medication</h3>","expressions":{}},{"name":"dgTTOMeds","type":"content","item-type":"data-grid","_auto_id_":"a575e629-4bbb-419a-a1a7-b875eb3c37df","content":[{"name":"dgTTODate","type":"content","item-type":"data-grid-column","_auto_id_":"6f8ed6f9-cfbc-4fd6-b85c-b9535a9da714","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Date","key":"Date"},{"name":"dgTTODrug","type":"content","item-type":"data-grid-column","_auto_id_":"d69a4605-4415-490b-91ea-6d28104b785f","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Drug","key":"Drug"},{"name":"dgTTORoute","type":"content","item-type":"data-grid-column","_auto_id_":"2bb1826d-2b3b-4507-9b93-025afa4a899b","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Route","key":"Route"},{"name":"dgTTOSite","type":"content","item-type":"data-grid-column","_auto_id_":"94945dc5-e78d-45f3-8e94-264feeed32e3","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Site","key":"Site"},{"name":"dgTTODose","type":"content","item-type":"data-grid-column","_auto_id_":"c861373e-b598-4a82-ab14-9b4961652341","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Dose","key":"Dose","width":""},{"name":"dgTTOUnit","type":"content","item-type":"data-grid-column","_auto_id_":"617aaa56-1598-46f0-b0d3-98f8be6221b5","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Unit","key":"Unit","width":""},{"name":"dgTTOFreq","type":"content","item-type":"data-grid-column","_auto_id_":"6a52e356-724f-4d8a-a84d-ca740c7a515c","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Frequency","key":"Freq"},{"name":"dgTTOComments","type":"content","item-type":"data-grid-column","_auto_id_":"a3cbd0f6-492f-4a3d-a7e6-8de297cf99c8","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Comments","key":"Comments"},{"name":"dgTTOPrescribed","type":"content","item-type":"data-grid-column","_auto_id_":"bb548417-70d0-4fd6-a5ea-1b4dd093060a","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Precribed By","key":"PrescribeName"},{"name":"dgTTOAdmin","type":"content","item-type":"data-grid-column","_auto_id_":"5ec062f3-07fd-4ece-bd8a-0aa35ea7c389","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Administered By","key":"AdminName"},{"name":"dgTTOChecked","type":"content","item-type":"data-grid-column","_auto_id_":"154ccf7c-d063-4718-ad5f-1ad9b194cc0a","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Checked By","key":"CheckedName"}],"sourceType":"dynamic","showSearch":"false","fixedHeaders":"true","usePagination":"true","pageSize":"10","showPagination":"true","useLocalInteraction":"false","dataSourceMethod":"GET","selectionMode":"Row","model":"$store.variables.TTOMeds","actions":[{"event":"selection","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.TTOMedID = $data.rowData.TTOMedID;\ncti.store.variables.TTORoute = $data.rowData.Route;\ncti.store.variables.TTOSite = $data.rowData.Site;\ncti.store.variables.TTODose = $data.rowData.Dose;\ncti.store.variables.TTOUnit = $data.rowData.Unit;\ncti.store.variables.TTOFreq = $data.rowData.Freq;\ncti.store.variables.TTOComments = $data.rowData.Comments;\ncti.store.variables.TTODrug = $data.rowData.Drug;\ncti.store.variables.TTODate = $data.rowData.Date;\ncti.store.variables.TTOPrescribeName = $data.rowData.PrescribeName;\ncti.store.variables.TTOAdminName = $data.rowData.AdminName;\ncti.store.variables.TTOCheckedName = $data.rowData.CheckedName;\ncti.store.variables.TTOsigChecked = $data.rowData.CheckedSig;\ncti.store.pages.EditTTOMeds = [];\ncti.store.pages.EditTTOMeds.dtGivenMeds = [];\ncti.store.pages.EditTTOMeds.selRoute = [];\ncti.store.pages.EditTTOMeds.txtSite = \"\";\ncti.store.pages.EditTTOMeds.numDose = \"\";\ncti.store.pages.EditTTOMeds.selUnits = [];\ncti.store.pages.EditTTOMeds.txtFreq = \"\";\ncti.store.pages.EditTTOMeds.txtComments = \"\";\ncti.store.pages.EditTTOMeds.txtPrescribeName = \"\";\ncti.store.pages.EditTTOMeds.txtAdminName = \"\";\ncti.store.pages.EditTTOMeds.txtCheckedName = \"\";\ncti.store.pages.EditTTOMeds.sigChecked = \"\";\n$success();"},"_auto_id_":"4e07bffc-5a39-4da7-a55a-78d9dd81a5e8","actions":[{"event":"success","type":"go-to-page","data":{"name":"EditTTOMeds","isConditional":false},"_auto_id_":"f65b1820-409a-4cf7-b52d-047a6ba7f20e"}]}],"expressions":{},"autoSaveEdits":false},{"name":"butAddTTOMed","type":"button","item-type":"button","_auto_id_":"619a975c-b6b0-411c-9974-df2fbd5d06b3","content":"Add New","theme":"default","left-icon":"fa-plus-square","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.AddTTOMeds = [];\ncti.store.pages.AddTTOMeds.dtGivenMeds = [];\ncti.store.pages.AddTTOMeds.txtRoute = \"\";\ncti.store.pages.AddTTOMeds.txtSite = \"\";\ncti.store.pages.AddTTOMeds.txtFreq = \"\";\ncti.store.pages.AddTTOMeds.txtDose = \"\";\ncti.store.pages.AddTTOMeds.txtComments = \"\";\ncti.store.pages.AddTTOMeds.txtPrescribeName = \"\";\ncti.store.pages.AddTTOMeds.txtAdminName = \"\";\ncti.store.pages.AddTTOMeds.txtCheckedName = \"\";\ncti.store.pages.AddTTOMeds.sigPrescribe = \"\";\ncti.store.pages.AddTTOMeds.sigAdmin = \"\";\ncti.store.pages.AddTTOMeds.sigChecked = \"\";\n$success()"},"_auto_id_":"6f0d353c-fe10-412b-90b7-c73a5da1f342","actions":[{"event":"success","type":"go-to-page","data":{"name":"AddTTOMeds","isConditional":false},"_auto_id_":"b7b232e3-152d-45d2-8444-db54e95daa9a"}]}],"classes":"addMeds"},{"name":"titEDPresc","type":"content","item-type":"title","_auto_id_":"683d91c6-b4e0-4283-bb95-d7523c1cc37c","content":"<h3>Prescription Given</h3>","expressions":{}},{"name":"dgEDPresc","type":"content","item-type":"data-grid","_auto_id_":"1e5011b0-e35e-413e-9ce1-3fc884aba0a3","content":[{"name":"dgPrescType","type":"content","item-type":"data-grid-column","_auto_id_":"1b7272b1-f73b-4575-b8fe-38fa204bbf78","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Type","key":"PrescType"},{"name":"dgPrescDate","type":"content","item-type":"data-grid-column","_auto_id_":"3ad59d06-548e-471b-ae70-2e0d874dad2e","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Date","key":"Date"},{"name":"dgPrescDrug","type":"content","item-type":"data-grid-column","_auto_id_":"4c0f44c9-b984-489c-8c8b-c70e8a68e2d0","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Drug","key":"Drug"},{"name":"dgPrescRoute","type":"content","item-type":"data-grid-column","_auto_id_":"2b2bcee3-0147-4b63-87ba-6323719219c6","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Route","key":"Route"},{"name":"dgPrescSite","type":"content","item-type":"data-grid-column","_auto_id_":"0ef2bdcb-62a5-47f8-9f5f-f13a21ca38e6","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Site","key":"Site"},{"name":"dgPrescDose","type":"content","item-type":"data-grid-column","_auto_id_":"cf2f6f04-47b2-4b60-a0e0-e71d7575cafe","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Dose","key":"Dose","width":""},{"name":"dgPrescUnit","type":"content","item-type":"data-grid-column","_auto_id_":"33367642-c64d-4e95-89ce-8fe61892ed06","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Unit","key":"Unit","width":""},{"name":"dgPrescFreq","type":"content","item-type":"data-grid-column","_auto_id_":"512e3b19-936c-42ad-a737-07fd09c863d2","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Frequency","key":"Freq"},{"name":"dgPrescComments","type":"content","item-type":"data-grid-column","_auto_id_":"47e8d4f6-9748-41ff-821d-5f0b1b28792b","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Comments","key":"Comments"},{"name":"dgPrescPrescribed","type":"content","item-type":"data-grid-column","_auto_id_":"8c549930-b6f7-4454-96de-9e1409fa3395","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Precribed By","key":"PrescribeName"},{"name":"dgPrescAdmin","type":"content","item-type":"data-grid-column","_auto_id_":"8dfe99ce-977f-4c9b-aba8-c2edbf5ea2b7","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Administered By","key":"AdminName"},{"name":"dgPrescChecked","type":"content","item-type":"data-grid-column","_auto_id_":"1679cfa1-c5ae-45bb-8935-aa93742b37a7","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Checked By","key":"CheckedName"}],"sourceType":"dynamic","showSearch":"false","fixedHeaders":"true","usePagination":"true","pageSize":"10","showPagination":"true","useLocalInteraction":"false","dataSourceMethod":"GET","selectionMode":"Row","model":"$store.variables.PrescMeds","actions":[{"event":"selection","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.PrescMedID = $data.rowData.PrescMedID;\ncti.store.variables.PrescType = $data.rowData.Type;\ncti.store.variables.PrescRoute = $data.rowData.Route;\ncti.store.variables.PrescSite = $data.rowData.Site;\ncti.store.variables.PrescDose = $data.rowData.Dose;\ncti.store.variables.PrescUnit = $data.rowData.Unit;\ncti.store.variables.PrescFreq = $data.rowData.Freq;\ncti.store.variables.PrescComments = $data.rowData.Comments;\ncti.store.variables.PrescDrug = $data.rowData.Drug;\ncti.store.variables.PrescDate = $data.rowData.Date;\ncti.store.variables.PrescPrescribeName = $data.rowData.PrescribeName;\ncti.store.variables.PrescAdminName = $data.rowData.AdminName;\ncti.store.variables.PrescCheckedName = $data.rowData.CheckedName;\ncti.store.variables.PrescsigChecked = $data.rowData.CheckedSig;\ncti.store.pages.EditPrescMeds = [];\ncti.store.pages.EditPrescMeds.dtGivenMeds = [];\ncti.store.pages.EditPrescMeds.selRoute = [];\ncti.store.pages.EditPrescMeds.txtSite = \"\";\ncti.store.pages.EditPrescMeds.numDose = \"\";\ncti.store.pages.EditPrescMeds.selUnits = [];\ncti.store.pages.EditPrescMeds.txtFreq = \"\";\ncti.store.pages.EditPrescMeds.txtComments = \"\";\ncti.store.pages.EditPrescMeds.txtPrescribeName = \"\";\ncti.store.pages.EditPrescMeds.txtAdminName = \"\";\ncti.store.pages.EditPrescMeds.txtCheckedName = \"\";\ncti.store.pages.EditPrescMeds.sigChecked = \"\";\n$success();"},"_auto_id_":"a4ec891f-ead7-4b35-b0b9-6ff0d7cdc432","actions":[{"event":"success","type":"go-to-page","data":{"name":"EditPrescMeds","isConditional":false},"_auto_id_":"c632bd88-9c08-4cc2-a5f8-02a45f6039e5"}]}],"expressions":{},"autoSaveEdits":false},{"name":"butAddPrescMed","type":"button","item-type":"button","_auto_id_":"0406529c-d789-4fdb-b6b1-c0c335db30c1","content":"Add New","theme":"default","left-icon":"fa-plus-square","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.AddPrescMeds = [];\ncti.store.pages.AddPrescMeds.dtGivenMeds = [];\ncti.store.pages.AddPrescMeds.txtRoute = \"\";\ncti.store.pages.AddPrescMeds.txtSite = \"\";\ncti.store.pages.AddPrescMeds.txtDose = \"\";\ncti.store.pages.AddPrescMeds.txtFreq = \"\";\ncti.store.pages.AddPrescMeds.txtComments = \"\";\ncti.store.pages.AddPrescMeds.txtPrescribeName = \"\";\ncti.store.pages.AddPrescMeds.txtAdminName = \"\";\ncti.store.pages.AddPrescMeds.txtCheckedName = \"\";\ncti.store.pages.AddPrescMeds.sigPrescribe = \"\";\ncti.store.pages.AddPrescMeds.sigAdmin = \"\";\ncti.store.pages.AddPrescMeds.sigChecked = \"\";\n$success()"},"_auto_id_":"1885275c-3aee-412f-8d68-2f377632c35a","actions":[{"event":"success","type":"go-to-page","data":{"name":"AddPrescMeds","isConditional":false},"_auto_id_":"a049e5d0-f624-45fb-b786-28a6e8354d57"}]}],"classes":"addMeds"},{"name":"titGPRepMeds","type":"content","item-type":"title","_auto_id_":"a3dd3a97-aff9-4a1b-a92a-619dae571526","content":"<h3>Medication History from GP Surgery</h3>","expressions":{}},{"name":"dgGPRepMeds","type":"content","item-type":"data-grid","_auto_id_":"97200edf-abdb-4a3b-848d-c8017fff1323","content":[{"name":"dgGPRepMedsDate","type":"content","item-type":"data-grid-column","_auto_id_":"8d3d3ea0-9ae7-4179-ba55-1fd39d185a85","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Date","key":"MedsDate"},{"name":"dgGPRepMedsDrug","type":"content","item-type":"data-grid-column","_auto_id_":"3ea982e8-5dc5-4f81-9102-d357733e0c54","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Medication","key":"Rubric"},{"name":"dgGPRepMedsAmount","type":"content","item-type":"data-grid-column","_auto_id_":"8405c82d-708e-4306-8bd0-840badcd6400","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Quantity","key":"Quantity"},{"name":"dgGPRepMedsDosage","type":"content","item-type":"data-grid-column","_auto_id_":"5bbc27e2-125a-45ac-b2ff-b099f58035a9","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Dosage","key":"Dosage"}],"sourceType":"dynamic","showSearch":"false","fixedHeaders":"true","usePagination":"true","pageSize":"10","showPagination":"true","useLocalInteraction":"false","dataSourceMethod":"GET","selectionMode":"Row","model":"$store.variables.RepMedsArray","actions":[{"event":"selection","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.GPDate = $data.rowData.MedsDate;\ncti.store.variables.GPDrug = $data.rowData.Rubric;\ncti.store.variables.GPAmount = $data.rowData.Quantity;\ncti.store.variables.GPDosage = $data.rowData.Dosage;\ncti.store.pages.Discontinue = [];\ncti.store.pages.Discontinue.txtGPDate = \"\";\ncti.store.pages.Discontinue.txtGPDrug = \"\";\ncti.store.pages.Discontinue.txtGPAmount = \"\";\ncti.store.pages.Discontinue.txtGPDosage = \"\";\n$success();"},"_auto_id_":"401ac9a1-056b-48f5-8e4f-aa0fadbd17bf","actions":[{"event":"success","type":"go-to-page","data":{"name":"Discontinue","isConditional":false},"_auto_id_":"5f60d7ac-d4d0-4fb4-a05a-2e91ee398449"}]}],"expressions":{},"autoSaveEdits":false},{"name":"titGPMeds","type":"content","item-type":"title","_auto_id_":"d17e1b36-e061-478b-8074-f734afdef70b","content":"<h3>Acute Medication from GP Surgery</h3>","expressions":{}},{"name":"dgGPMeds","type":"content","item-type":"data-grid","_auto_id_":"77eb4c47-c803-43e0-aab9-2ff685e01c7e","content":[{"name":"dgGPMedsDate","type":"content","item-type":"data-grid-column","_auto_id_":"dd773070-2780-406e-8777-95492b5ee133","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Date","key":"MedsDate"},{"name":"dgGPMedsDrug","type":"content","item-type":"data-grid-column","_auto_id_":"a07547d8-3d90-47f6-b752-8ab8c59da34d","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Medication","key":"Rubric"},{"name":"dgGPMedsAmount","type":"content","item-type":"data-grid-column","_auto_id_":"296c7ca4-0b41-403e-94a9-fb22b1d14caa","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Quantity","key":"Quantity"},{"name":"dgGPMedsDosage","type":"content","item-type":"data-grid-column","_auto_id_":"fcc55907-c2df-4daf-840d-82d70ccc7d27","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Dosage","key":"Dosage"}],"sourceType":"dynamic","showSearch":"false","fixedHeaders":"true","usePagination":"true","pageSize":"10","showPagination":"true","useLocalInteraction":"false","dataSourceMethod":"GET","selectionMode":"Row","model":"$store.variables.MedsArray","actions":[{"event":"selection","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.GPDate = $data.rowData.MedsDate;\ncti.store.variables.GPDrug = $data.rowData.Rubric;\ncti.store.variables.GPAmount = $data.rowData.Quantity;\ncti.store.variables.GPDosage = $data.rowData.Dosage;\ncti.store.pages.Discontinue = [];\ncti.store.pages.Discontinue.txtGPDate = \"\";\ncti.store.pages.Discontinue.txtGPDrug = \"\";\ncti.store.pages.Discontinue.txtGPAmount = \"\";\ncti.store.pages.Discontinue.txtGPDosage = \"\";\n$success();"},"_auto_id_":"986b4328-5ba5-4a55-a197-d2e89f6d5dcb","actions":[{"event":"success","type":"go-to-page","data":{"name":"Discontinue","isConditional":false},"_auto_id_":"d099b96a-96a8-47e9-a25c-ebfadb2606a3"}]}],"expressions":{},"autoSaveEdits":false},{"name":"titDisMeds","type":"content","item-type":"title","_auto_id_":"530ec6ad-0ea9-45ab-9475-4bdd717468ca","content":"<h3>Discontinued Medication</h3>","expressions":{}},{"name":"dgGPDisc","type":"content","item-type":"data-grid","_auto_id_":"02eb3081-089e-4bc6-b751-3d062911234d","content":[{"name":"dgGPDiscDate","type":"content","item-type":"data-grid-column","_auto_id_":"fa564685-a1b2-4126-baf8-e5d496a5f61c","dataType":"string","sortable":false,"sort":"","editable":false,"heading":"Date","key":"Date"},{"name":"dgGPDiscDrug","type":"content","item-type":"data-grid-column","_auto_id_":"f16cefa1-a48b-4e6e-8751-8d8309dedb4b","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Medication","key":"Drug"},{"name":"dgGPDiscAmount","type":"content","item-type":"data-grid-column","_auto_id_":"ac4400fa-30fc-45be-a8d1-e5fe7e639906","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Quantity","key":"Amount"},{"name":"dgGPDiscDosage","type":"content","item-type":"data-grid-column","_auto_id_":"638b6fc6-b89b-4159-ba00-6a73bcf59369","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Dosage","key":"Dose"}],"sourceType":"dynamic","showSearch":"false","fixedHeaders":"true","usePagination":"true","pageSize":"10","showPagination":"true","useLocalInteraction":"false","dataSourceMethod":"GET","selectionMode":"Row","model":"$store.variables.DiscontinueMeds","actions":[{"event":"selection","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.DisMedID = $data.rowData.DisMedID;\ncti.store.variables.GPDate = $data.rowData.Date;\ncti.store.variables.GPDrug = $data.rowData.Drug;\ncti.store.variables.GPAmount = $data.rowData.Amount;\ncti.store.variables.GPDosage = $data.rowData.Dose;\ncti.store.pages.Continue = [];\ncti.store.pages.Continue.txtGPDate = \"\";\ncti.store.pages.Continue.txtGPDrug = \"\";\ncti.store.pages.Continue.txtGPAmount = \"\";\ncti.store.pages.Continue.txtGPDosage = \"\";\n$success();"},"_auto_id_":"d3c38270-dda1-4d25-abb4-09a4e9a2d59d","actions":[{"event":"success","type":"go-to-page","data":{"name":"Continue","isConditional":false},"_auto_id_":"e9292464-410e-4ca4-b85a-812384f7562a"}]}],"expressions":{},"autoSaveEdits":false},{"name":"butSave","type":"button","item-type":"button","_auto_id_":"c454d666-d951-4d58-93bb-14b58a26915b","content":"Save","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-api","data":{"sync":true,"name":"Form","operation":"EDSSaveForm","params":{"formID":"{{$store.variables.formID}}","Allergies":"{{$store.variables.EDAllergies}}","Comments":"{{$store.pages.Comments.txtComments}}","EDMeds":"{{$store.variables.EDMeds}}","TTOMeds":"{{$store.variables.TTOMeds}}","DisMeds":"{{$store.variables.DiscontinueMeds}}","username":"{{$store.variables.Username}}","PrescMeds":"{{$store.variables.PrescMeds}}"}},"_auto_id_":"87b07171-4372-477c-ad67-c70afd63332e","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"Saved"},"_auto_id_":"24179742-945e-40b0-a589-6596d79d9506"},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"LoginFail","title":"Error","text":"Unable to save, please try again"},"_auto_id_":"68b124e2-a730-4c16-8ab5-f2bdb9c0d99d"}]}]}],"expressions":{}},{"name":"nav_footer","type":"area","item-type":"button-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"navSearch","type":"button","item-type":"nav-button","content":"Patient List","extends":{"type":"button","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":{"isConditional":false,"expressions":{},"name":"PatientSearch"},"_auto_id_":"65d6e387-f74a-4e60-9ad1-99e617b37352"}],"left-icon":"fa-user","_auto_id_":"ad0aa6ba-a5d5-4fb6-985b-e1d5456b625a","expressions":{},"theme":"default"},{"name":"navMeds","type":"button","item-type":"nav-button","_auto_id_":"f9d0c50f-82e4-499e-88bf-a95db5b42fdd","extends":{"type":"button","item-type":"button"},"content":"Medications","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-eyedropper"},{"name":"navAllergies","type":"button","item-type":"nav-button","_auto_id_":"70533b64-366d-4446-853a-d615c934cf9e","extends":{"type":"button","item-type":"button"},"content":"Allergies","actions":[{"event":"click","type":"go-to-page","data":{"name":"Allergies","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-exclamation"},{"name":"navComplete","type":"button","item-type":"nav-button","_auto_id_":"5df37fff-6853-4cbe-b221-1b173ac9c551","extends":{"type":"button","item-type":"button"},"content":"Comments","actions":[{"event":"click","type":"go-to-page","data":{"name":"Comments","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-pencil"}],"_auto_id_":"9ffb0cb4-a556-4f61-bb33-4eec3946142d","expressions":{}}]},{"start":false,"name":"AddEDMeds","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"4f324023-73d1-4dc1-8af0-740f72e8627e","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"\ncti.store.variables.Meds1 = [];\ncti.store.variables.Meds2 = \"\";\ncti.store.variables.Meds3 = \"\";\nif (cti.store.variables.GetEDMeds != null){\nfor(var i=0; i< cti.store.variables.GetEDMeds.length;)\n{\n    cti.store.variables.Meds1.push({\"Name\":cti.store.variables.GetEDMeds[i].dcDesc});\n   cti.store.variables.Meds2 = cti.store.variables.Meds2 + ''+cti.store.variables.GetEDMeds[i].dcDesc+'#,';\n       cti.store.variables.Meds3 = cti.store.variables.Meds3 + ''+cti.store.variables.GetEDMeds[i].dcDesc+'#,';\n  \ti=i+1;\n \n}\n}\n\nvar string = cti.store.variables.Meds2;\nvar array = string.split('#,');\n  cti.store.variables.Meds2 = array;\nvar string1 = cti.store.variables.Meds3;\nvar array1 = string1.split('#,');\n  cti.store.variables.Meds3 = array1;\n\n\nfunction autocomplete(inp, arr) {\n  /*the autocomplete function takes two arguments,\n  the text field element and an array of possible autocompleted values:*/\n  var currentFocus;\n  /*execute a function when someone writes in the text field:*/\n  inp.addEventListener(\"input\", function(e) {\n      var a, b, i, val = this.value;\n      /*close any already open lists of autocompleted values*/\n      closeAllLists();\n      if (!val) { return false;}\n      currentFocus = -1;\n      /*create a DIV element that will contain the items (values):*/\n      a = document.createElement(\"DIV\");\n      a.setAttribute(\"id\", this.id + \"autocomplete-list\");\n      a.setAttribute(\"class\", \"autocomplete-items\");\n      /*append the DIV element as a child of the autocomplete container:*/\n      this.parentNode.appendChild(a);\n      /*for each item in the array...*/\n      for (i = 0; i < arr.length; i++) {\n        /*check if the item starts with the same letters as the text field value:*/\n                 var str = arr[i].toUpperCase();\n  var patt = new RegExp(val.toUpperCase());\n  var res = patt.test(str);\n      if (res == true) {\n          b = document.createElement(\"DIV\");\n\n  b.innerHTML += arr[i];\n          b.innerHTML += \"<input type='hidden' value='\" + arr[i] + \"'>\";\n           b.addEventListener(\"click\", function(e) {\n              inp.value = this.getElementsByTagName(\"input\")[0].value;\n                      for (var j = 0; j < cti.store.variables.Meds3.length;) {\n \t\t\t if (cti.store.variables.Meds2[j] == inp.value){        \n               document.getElementById(\"DrugMed\").value =  cti.store.variables.Meds3[j];\n                  }\n \t \t\t\t\tj=j+1;\n\t\t\t\t}\n             closeAllLists();\n          });\n          a.appendChild(b);\n        }\n      }\n  });\n  /*execute a function presses a key on the keyboard:*/\n  inp.addEventListener(\"keydown\", function(e) {\n      var x = document.getElementById(this.id + \"autocomplete-list\");\n      if (x) x = x.getElementsByTagName(\"div\");\n      if (e.keyCode == 40) {\n        /*If the arrow DOWN key is pressed,\n        increase the currentFocus variable:*/\n        currentFocus++;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 38) { //up\n        /*If the arrow UP key is pressed,\n        decrease the currentFocus variable:*/\n        currentFocus--;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 13) {\n        /*If the ENTER key is pressed, prevent the form from being submitted,*/\n        e.preventDefault();\n        if (currentFocus > -1) {\n          /*and simulate a click on the \"active\" item:*/\n          if (x) x[currentFocus].click();\n        }\n      }\n  });\n  function addActive(x) {\n    /*a function to classify an item as \"active\":*/\n    if (!x) return false;\n    /*start by removing the \"active\" class on all items:*/\n    removeActive(x);\n    if (currentFocus >= x.length) currentFocus = 0;\n    if (currentFocus < 0) currentFocus = (x.length - 1);\n    /*add class \"autocomplete-active\":*/\n    x[currentFocus].classList.add(\"autocomplete-active\");\n  }\n  function removeActive(x) {\n    /*a function to remove the \"active\" class from all autocomplete items:*/\n    for (var i = 0; i < x.length; i++) {\n      x[i].classList.remove(\"autocomplete-active\");\n    }\n  }\n  function closeAllLists(elmnt) {\n    /*close all autocomplete lists in the document,\n    except the one passed as an argument:*/\n    var x = document.getElementsByClassName(\"autocomplete-items\");\n    for (var i = 0; i < x.length; i++) {\n      if (elmnt != x[i] && elmnt != inp) {\n        x[i].parentNode.removeChild(x[i]);\n      }\n    }\n  }\n  /*execute a function when someone clicks in the document:*/\n  document.addEventListener(\"click\", function (e) {\n      closeAllLists(e.target);\n  });\n}\n\nvar DiagArray =cti.store.variables.Meds2 ;\n\n/*initiate the autocomplete function on the \"myInput\" element, and pass along the countries array as possible autocomplete values:*/\nautocomplete(document.getElementById(\"DrugMed1\"), DiagArray);\n$success();"},"_auto_id_":"5bbafea3-8bdd-4488-b5a8-49903028e6f7"}]}],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"c43cefc2-8fb2-45be-a4c5-5d259b030e81","extends":{"type":"area","item-type":"row"},"content":[{"name":"butBack","type":"button","item-type":"button","_auto_id_":"1ad70b2c-03b5-400d-a147-29ec71d28b14","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"6e6b3b93-478d-4641-a3ab-a2246da0ecc0"}]},{"name":"titEDSMedsAdd","type":"content","item-type":"title","_auto_id_":"ffc1a03f-6655-4dbb-a33a-a05dd102b1a3","content":"<h1>Add EDS Medication</h1>","expressions":{}},{"name":"butAddMeds","type":"button","item-type":"button","_auto_id_":"fe42e663-975a-44cf-8a85-36c4fd536a02","content":"","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"//create contacts array if it doesn't exist\nif(!cti.store.variables.EDMeds){\n    cti.store.variables.EDMeds = [];\n}\n\nEDMedID = cti.store.variables.EDMeds.length;\n\n//save the data\ncti.store.variables.EDMeds.push({\"EDMedID\":EDMedID,\"Drug\":document.getElementById(\"DrugMed1\").value, \"Route\":cti.store.pages.AddEDMeds.selRoute.label, \"Site\":cti.store.pages.AddEDMeds.txtSite, \"Dose\":cti.store.pages.AddEDMeds.numDose, \"Unit\":cti.store.pages.AddEDMeds.selUnits.label, \"Freq\":cti.store.pages.AddEDMeds.txtFreq, \"Date\":cti.store.pages.AddEDMeds.dtGivenMeds.time, \"Comments\":cti.store.pages.AddEDMeds.txtComments, \"PrescribeName\":cti.store.pages.AddEDMeds.txtPrescribeName,\"AdminName\":cti.store.pages.AddEDMeds.txtAdminName,\"CheckedName\":cti.store.pages.AddEDMeds.txtCheckedName});\n\ndocument.getElementById(\"DrugMed\").value = \"\";\ndocument.getElementById(\"DrugMed1\").value = \"\";\ncti.store.pages.AddEDMeds.selRoute = \"\";\ncti.store.pages.AddEDMeds.txtSite = \"\";\ncti.store.pages.AddEDMeds.numDose = \"\";\ncti.store.pages.AddEDMeds.selDose = \"\";\ncti.store.pages.AddEDMeds.selUnits = \"\";\ncti.store.pages.AddEDMeds.txtFreq = \"\";\ncti.store.pages.AddEDMeds.dtGivenMeds.time = \"\";\ncti.store.pages.AddEDMeds.dtGivenMeds = [];\ncti.store.pages.AddEDMeds.txtComments = \"\";\ncti.store.pages.AddEDMeds.txtPrescribeName = \"\";\ncti.store.pages.AddEDMeds.txtAdminName = \"\";\ncti.store.pages.AddEDMeds.txtCheckedName = \"\";\n$success()"},"_auto_id_":"6e5d435f-737c-4fde-af7c-cef2d56c2354","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"notificationMed"},"_auto_id_":"dc440070-c322-44f0-97f5-6ea11b08b91c"},{"event":"success","type":"go-to-page","data":{"name":"holdEDMeds","isConditional":false},"_auto_id_":"c9460786-b842-4bd5-8912-6b2cfab0c921"}]}],"expressions":{},"classes":"AddMedsBut","right-icon":"fa-check"}],"expressions":{}},{"name":"scrollableAddEDMeds_1","type":"area","item-type":"scrollable","_auto_id_":"c996db52-2dab-4403-8099-80a19836943a","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"cd8ed11a-ce1b-475c-850e-f5ebbd05de11","content":[{"name":"title_Medication_1","type":"content","item-type":"title","_auto_id_":"7471d8f9-4103-44b4-b84c-c290291a0df9","content":"<h2>Medication given in ED</h2>","expressions":{}},{"name":"grpDrugs_1","type":"area","item-type":"group","_auto_id_":"326a5a28-9657-4a5c-ae60-be449452cf33","content":[{"name":"dtGivenMeds","type":"component","item-type":"web-component","content":[],"componentId":"5feae92d-49d9-4329-abbf-52d9cdf7bffa","_auto_id_":"70039599-a2a0-4489-a1d0-d5ce63f9e9fb","attributes":{"label":"Date Time Given"},"expressions":{},"actions":[]},{"name":"htmlEDMedDrugs","type":"content","item-type":"html","_auto_id_":"22a5bbb9-0361-4a8f-b92f-eac1b8d74f8b","content":"<div class=\"autocomplete\" style=\"width:100%;\">\n  <label class=\"control-label ng-binding\">Drug:</label></br>\n           <input id=\"DrugMed1\" type=\"text\" name=\"myCountry\" placeholder=\"Drugs\">\n      <input type=\"hidden\" id=\"DrugMed\" name=\"DrugMed\" value=\"\">\n  </div>","expressions":{}},{"name":"selRoute","type":"choice","item-type":"select","_auto_id_":"2403faf4-4777-4a73-a205-724c4cd66990","label":"Route:","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDRoute","label-property":"Route","value-property":"Route"},{"name":"txtSite","type":"user-input","item-type":"text","_auto_id_":"271d196f-ae0d-40ea-87f9-f4b8ee9335f2","label":"Site: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"rowDose","type":"area","item-type":"row","_auto_id_":"279b5ce2-b20f-4ae5-86a2-efb705442c8f","content":[{"name":"numDose","type":"user-input","item-type":"number","_auto_id_":"4f252971-f305-4cb4-bb7e-8a39d917187e","label":"Dose: ","required":false,"decimals":2,"expressions":{}},{"name":"selUnits","type":"choice","item-type":"select","_auto_id_":"30a99cd5-bcfe-4b86-a81f-5e7b1bca3f19","label":"Units: ","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDDose","label-property":"Dose","value-property":"Dose"},{"name":"txtFreq","type":"user-input","item-type":"text","_auto_id_":"1321bb00-5942-4946-a910-5df8b1666870","label":"Frequency:","required":false,"multiline":false,"debounce":250,"expressions":{},"actions":[]}],"expressions":{}},{"name":"txtComments","type":"user-input","item-type":"text","_auto_id_":"02c4b0be-8953-4a3b-a2be-64a0d0c1742f","label":"Comments:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtPrescribeName","type":"user-input","item-type":"text","_auto_id_":"2f21bd20-3dfc-4651-ab26-c2f167bf6cb2","label":"Precribed By:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtAdminName","type":"user-input","item-type":"text","_auto_id_":"7a399ab1-18c7-4042-92e1-c070e0c5190a","label":"Administered By: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtCheckedName","type":"user-input","item-type":"text","_auto_id_":"7b820038-e817-4a92-927d-92aa26d040ab","label":"Checked By: ","required":false,"multiline":false,"debounce":250,"expressions":{}}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":true,"name":"Ready","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"5391b660-bb57-421e-925e-35e1a067a10b","actions":[{"event":"onpageload","type":"call-api","data":{"sync":true,"name":"Lookups","operation":"GetMeds"},"_auto_id_":"0ed18dac-11ff-4c59-b3a8-87766c5fce7e","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"Lookups","operation":"MedFreq"},"_auto_id_":"255dc796-06c9-49cc-b493-826f06efd4d2","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"Lookups","operation":"GetEDMeds"},"_auto_id_":"cd991f27-55a8-4a02-9fd5-505c20f5afc3","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"Lookups","operation":"GetEDDose"},"_auto_id_":"f5df0866-b522-45c1-8b89-fb14a195a640","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"Lookups","operation":"GetEDRoute"},"_auto_id_":"6284e258-6b6f-42a4-8d5d-bc45a0e7301d","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.GetMeds = cti.store.api.Lookups.GetMeds;\ncti.store.variables.LKCons = cti.store.api.Lookups.LKCons;\ncti.store.variables.LKWards = cti.store.api.Lookups.LKWards;\ncti.store.variables.MedFreq = cti.store.api.Lookups.MedFreq;\ncti.store.variables.GetEDMeds = cti.store.api.Lookups.GetEDMeds;\ncti.store.variables.GetEDRoute = cti.store.api.Lookups.GetEDRoute;\ncti.store.variables.GetEDDose = cti.store.api.Lookups.GetEDDose;\ncti.store.variables.varGotMeds = \"Yes\";\n$success()"},"_auto_id_":"60eb8f15-233b-41c3-a318-8f6b505f50c4","actions":[{"event":"success","type":"set-variable","data":{"name":"varGotMeds","value":"Yes"},"_auto_id_":"7f85f45d-417e-4867-b7d4-debb3a21d207"},{"event":"success","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"eef55072-8da7-441c-a68c-2bae488d2ed2"}]},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"app_notification_1"},"_auto_id_":"7342fdd4-9fea-4623-8ee8-0764a47c66f0"}]}]}]},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"app_notification_1"},"_auto_id_":"f673d9bf-f22d-48f1-b305-ca0ecb587fa7"}]}]}]}],"content":[{"name":"static_1","type":"area","item-type":"static","_auto_id_":"b64fe3c0-91d9-4f35-90df-c4b9d316193a","content":[{"name":"htmlReady","type":"content","item-type":"html","_auto_id_":"0addc672-69bd-4ebb-b503-0274597bf3da","content":"<p>Getting things ready...</p>","expressions":{},"classes":"ready"}],"expressions":{},"classes":"MainTitle"}]},{"start":false,"name":"EditEDMeds","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"07c23bfc-f6c6-46b5-adb6-49106843b04f","actions":[{"event":"onpageload","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.EditEDMeds.selRoute.label = cti.store.variables.Route;\ncti.store.pages.EditEDMeds.selRoute.value = cti.store.variables.Route;\ncti.store.pages.EditEDMeds.txtSite = cti.store.variables.Site;\ncti.store.pages.EditEDMeds.numDose = cti.store.variables.Dose;\ncti.store.pages.EditEDMeds.selUnits.label = cti.store.variables.Unit;\ncti.store.pages.EditEDMeds.selUnits.value = cti.store.variables.Unit;\ncti.store.pages.EditEDMeds.txtFreq = cti.store.variables.Freq;\ncti.store.pages.EditEDMeds.dtGivenMeds.time = cti.store.variables.EDDate;\ncti.store.pages.EditEDMeds.txtComments = cti.store.variables.Comments;\ncti.store.pages.EditEDMeds.txtPrescribeName = cti.store.variables.PrescribeName;\ncti.store.pages.EditEDMeds.txtAdminName = cti.store.variables.AdminName;\ncti.store.pages.EditEDMeds.txtCheckedName = cti.store.variables.CheckedName;\ncti.store.pages.EditEDMeds.sigChecked = cti.store.variables.sigChecked;\n$success()"},"_auto_id_":"5ea30aeb-0f40-45b4-b513-b4613bfa5e2f"}]},{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"d342f570-c48b-4a44-b042-66c6e06cd8e6","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"\ncti.store.variables.Meds1 = [];\ncti.store.variables.Meds2 = \"\";\ncti.store.variables.Meds3 = \"\";\nif (cti.store.variables.GetEDMeds != null){\nfor(var i=0; i< cti.store.variables.GetEDMeds.length;)\n{\n    cti.store.variables.Meds1.push({\"Name\":cti.store.variables.GetEDMeds[i].dcDesc});\n   cti.store.variables.Meds2 = cti.store.variables.Meds2 + ''+cti.store.variables.GetEDMeds[i].dcDesc+'#,';\n       cti.store.variables.Meds3 = cti.store.variables.Meds3 + ''+cti.store.variables.GetEDMeds[i].dcDesc+'#,';\n  \ti=i+1;\n \n}\n}\n\nvar string = cti.store.variables.Meds2;\nvar array = string.split('#,');\n  cti.store.variables.Meds2 = array;\nvar string1 = cti.store.variables.Meds3;\nvar array1 = string1.split('#,');\n  cti.store.variables.Meds3 = array1;\n\n\nfunction autocomplete(inp, arr) {\n  /*the autocomplete function takes two arguments,\n  the text field element and an array of possible autocompleted values:*/\n  var currentFocus;\n  /*execute a function when someone writes in the text field:*/\n  inp.addEventListener(\"input\", function(e) {\n      var a, b, i, val = this.value;\n      /*close any already open lists of autocompleted values*/\n      closeAllLists();\n      if (!val) { return false;}\n      currentFocus = -1;\n      /*create a DIV element that will contain the items (values):*/\n      a = document.createElement(\"DIV\");\n      a.setAttribute(\"id\", this.id + \"autocomplete-list\");\n      a.setAttribute(\"class\", \"autocomplete-items\");\n      /*append the DIV element as a child of the autocomplete container:*/\n      this.parentNode.appendChild(a);\n      /*for each item in the array...*/\n      for (i = 0; i < arr.length; i++) {\n        /*check if the item starts with the same letters as the text field value:*/\n                 var str = arr[i].toUpperCase();\n  var patt = new RegExp(val.toUpperCase());\n  var res = patt.test(str);\n      if (res == true) {\n          b = document.createElement(\"DIV\");\n\n  b.innerHTML += arr[i];\n          b.innerHTML += \"<input type='hidden' value='\" + arr[i] + \"'>\";\n           b.addEventListener(\"click\", function(e) {\n              inp.value = this.getElementsByTagName(\"input\")[0].value;\n                      for (var j = 0; j < cti.store.variables.Meds3.length;) {\n \t\t\t if (cti.store.variables.Meds2[j] == inp.value){        \n               document.getElementById(\"EditEDDrugMed\").value =  cti.store.variables.Meds3[j];\n                  }\n \t \t\t\t\tj=j+1;\n\t\t\t\t}\n             closeAllLists();\n          });\n          a.appendChild(b);\n        }\n      }\n  });\n  /*execute a function presses a key on the keyboard:*/\n  inp.addEventListener(\"keydown\", function(e) {\n      var x = document.getElementById(this.id + \"autocomplete-list\");\n      if (x) x = x.getElementsByTagName(\"div\");\n      if (e.keyCode == 40) {\n        /*If the arrow DOWN key is pressed,\n        increase the currentFocus variable:*/\n        currentFocus++;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 38) { //up\n        /*If the arrow UP key is pressed,\n        decrease the currentFocus variable:*/\n        currentFocus--;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 13) {\n        /*If the ENTER key is pressed, prevent the form from being submitted,*/\n        e.preventDefault();\n        if (currentFocus > -1) {\n          /*and simulate a click on the \"active\" item:*/\n          if (x) x[currentFocus].click();\n        }\n      }\n  });\n  function addActive(x) {\n    /*a function to classify an item as \"active\":*/\n    if (!x) return false;\n    /*start by removing the \"active\" class on all items:*/\n    removeActive(x);\n    if (currentFocus >= x.length) currentFocus = 0;\n    if (currentFocus < 0) currentFocus = (x.length - 1);\n    /*add class \"autocomplete-active\":*/\n    x[currentFocus].classList.add(\"autocomplete-active\");\n  }\n  function removeActive(x) {\n    /*a function to remove the \"active\" class from all autocomplete items:*/\n    for (var i = 0; i < x.length; i++) {\n      x[i].classList.remove(\"autocomplete-active\");\n    }\n  }\n  function closeAllLists(elmnt) {\n    /*close all autocomplete lists in the document,\n    except the one passed as an argument:*/\n    var x = document.getElementsByClassName(\"autocomplete-items\");\n    for (var i = 0; i < x.length; i++) {\n      if (elmnt != x[i] && elmnt != inp) {\n        x[i].parentNode.removeChild(x[i]);\n      }\n    }\n  }\n  /*execute a function when someone clicks in the document:*/\n  document.addEventListener(\"click\", function (e) {\n      closeAllLists(e.target);\n  });\n}\n\nvar DiagArray =cti.store.variables.Meds2 ;\n\n/*initiate the autocomplete function on the \"myInput\" element, and pass along the countries array as possible autocomplete values:*/\nautocomplete(document.getElementById(\"EditEDDrugMed1\"), DiagArray);\ndocument.getElementById(\"EditEDDrugMed1\").value = cti.store.variables.Drug;"},"_auto_id_":"5f1123c6-6ead-45d3-96e9-488648f763c5"}]}],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"f42328d8-d29f-4836-8131-58c27c691a65","extends":{"type":"area","item-type":"row"},"content":[{"name":"butBack","type":"button","item-type":"button","_auto_id_":"04e85632-220c-4128-b770-4db1e2fad26b","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"c5a27a3a-39ca-4512-87f3-4c930ff2d0c0"}]},{"name":"titEDSMedsAdd","type":"content","item-type":"title","_auto_id_":"b1aedbb8-b06f-48e1-8f68-65c83e260da6","content":"<h1>Edit EDS Medication</h1>","expressions":{}},{"name":"butEditMeds","type":"button","item-type":"button","_auto_id_":"f7265d84-756e-488a-b37e-f1381d225053","content":"","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"for (var i = 0; i < cti.store.variables.EDMeds.length;) {\n  if (cti.store.variables.EDMeds[i].EDMedID == cti.store.variables.EDMedID)\n        cti.store.variables.EDMeds.splice(cti.store.variables.EDMedID,1);\n  \t\ti=i+1;\n}\n\nEDMedID = cti.store.variables.EDMedID;\n\n//save the data\ncti.store.variables.EDMeds.push({\"EDMedID\":EDMedID,\"Drug\":document.getElementById(\"EditEDDrugMed1\").value, \"Route\":cti.store.pages.EditEDMeds.selRoute.label, \"Site\":cti.store.pages.EditEDMeds.txtSite, \"Dose\":cti.store.pages.EditEDMeds.numDose, \"Unit\":cti.store.pages.EditEDMeds.selUnits.label, \"Freq\":cti.store.pages.EditEDMeds.txtFreq, \"Date\":cti.store.pages.EditEDMeds.dtGivenMeds.time, \"Comments\":cti.store.pages.EditEDMeds.txtComments, \"PrescribeName\":cti.store.pages.EditEDMeds.txtPrescribeName,\"AdminName\":cti.store.pages.EditEDMeds.txtAdminName,\"CheckedName\":cti.store.pages.EditEDMeds.txtCheckedName});\n$success()"},"_auto_id_":"09e94891-12a6-48a9-9f81-2043f7fb8e00","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"notificationMed","title":"Medication Updated"},"_auto_id_":"e94bae36-972a-4815-a46f-83ef1ca424da"},{"event":"success","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"5e754d47-cfaf-432b-b37b-9f430334fd2c"}]}],"expressions":{},"classes":"AddMedsBut","right-icon":"fa-check"}],"expressions":{}},{"name":"scrollableAddEDMeds_1","type":"area","item-type":"scrollable","_auto_id_":"d01285b5-c79e-41d2-8d86-1abd6ddc45e1","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"b5485d7b-e5b2-4878-ac04-7eb84b4e92ac","content":[{"name":"title_Medication_1","type":"content","item-type":"title","_auto_id_":"df8923f6-8152-4c18-bd3f-af13a63779fe","content":"<h2>Medication given in ED</h2>","expressions":{}},{"name":"grpDrugs_1","type":"area","item-type":"group","_auto_id_":"91472b85-60e7-4596-8db1-8fc96c82e195","content":[{"name":"dtGivenMeds","type":"component","item-type":"web-component","content":[],"componentId":"5feae92d-49d9-4329-abbf-52d9cdf7bffa","_auto_id_":"14d6978a-2115-408a-a330-9806496366d3","attributes":{"label":"Date Time Given"},"expressions":{},"actions":[]},{"name":"htmlMedDrugs","type":"content","item-type":"html","_auto_id_":"c2ee1895-d867-4b4d-bcaf-3af313f0c1c6","content":"<div class=\"autocomplete\" style=\"width:100%;\">\n  <label class=\"control-label ng-binding\">Drug:</label></br>\n           <input id=\"EditEDDrugMed1\" type=\"text\" name=\"myCountry\" placeholder=\"Drugs\">\n      <input type=\"hidden\" id=\"EditEDDrugMed\" name=\"EditEDDrugMed\" value=\"\">\n  </div>","expressions":{}},{"name":"selRoute","type":"choice","item-type":"select","_auto_id_":"792ea159-b611-4a32-a807-4e61e2d5b64b","label":"Route:","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDRoute","label-property":"Route","value-property":"Route"},{"name":"txtSite","type":"user-input","item-type":"text","_auto_id_":"0729bef6-1cc2-45cf-9bc9-33ff4a3b9d46","label":"Site: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"rowDose","type":"area","item-type":"row","_auto_id_":"ee548bd2-d6b8-49bb-9211-aefc79446c24","content":[{"name":"numDose","type":"user-input","item-type":"number","_auto_id_":"f3188381-e02e-4da0-8fd1-58460d12c23b","label":"Dose: ","required":false,"decimals":2,"expressions":{}},{"name":"selUnits","type":"choice","item-type":"select","_auto_id_":"7722b741-24ff-463f-a236-3b1402cfcaa6","label":"Units: ","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDDose","label-property":"Dose","value-property":"Dose"},{"name":"txtFreq","type":"user-input","item-type":"text","_auto_id_":"565d917d-6dd8-477e-97da-fe0a31590c8b","label":"Frequency: ","required":false,"multiline":false,"debounce":250,"expressions":{}}],"expressions":{}},{"name":"txtComments","type":"user-input","item-type":"text","_auto_id_":"4b275e15-47dc-456b-9444-cca01c34ffc6","label":"Comments:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtPrescribeName","type":"user-input","item-type":"text","_auto_id_":"72f072b6-a907-421e-9a09-ff5c366f8862","label":"Precribed By:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtAdminName","type":"user-input","item-type":"text","_auto_id_":"2c1f4de7-0f68-40dd-8628-95ea6bcb5324","label":"Administered By: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtCheckedName","type":"user-input","item-type":"text","_auto_id_":"8e91bcab-5f9c-403a-bfee-e83334d9b33f","label":"Checked By: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"butRemoveEDMed","type":"button","item-type":"button","_auto_id_":"52f6bc8b-8090-471b-b975-36c6aa38157e","content":"","theme":"default","expressions":{},"left-icon":"fa-trash","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"for (var i = 0; i < cti.store.variables.EDMeds.length;) {\n  if (cti.store.variables.EDMeds[i].EDMedID == cti.store.variables.EDMedID)\n        cti.store.variables.EDMeds.splice(cti.store.variables.EDMedID,1);\n  \t\ti=i+1;\n}\n\nfor (var i = 0; i < cti.store.variables.EDMeds.length;) {\n\tif (cti.store.variables.EDMeds[i].EDMedID >0)\n\t\tcti.store.variables.EDMeds[i].EDMedID = cti.store.variables.EDMeds[i].EDMedID-1;\n\t\ti=i+1;\n\t}"},"_auto_id_":"5095ae66-ad15-4ce9-a3ce-007684bd41bb","actions":[{"event":"success","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"c2ae8734-44d2-44e8-a0bb-35c192f7fdb2"}]}],"classes":"RemoveMedsBut"}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":false,"name":"Allergies","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"08991cbe-aee9-4740-892d-5d715e498c13","actions":[{"event":"onpageload","type":"call-api","data":{"sync":true,"name":"Demographics","operation":"EDMpiDemogs","params":{"manor":"{{$store.variables.manor}}"}},"_auto_id_":"ebd065ab-0b01-4d8e-b111-cc4ab4574b43","actions":[]}]}],"content":[{"name":"scrollPatBanner","type":"area","item-type":"scrollable","content":[{"name":"htmlPatBanner","type":"content","item-type":"html","_auto_id_":"c103be71-cb7e-4c13-8340-b021ab044669","content":"<div class=\"container\">\n<table width=\"100%\" border=\"1\">\n  <tr>\n    <th width=\"70%\">{{'$store.api.Demographics.EDMpiDemogs[0].PAT_NAME_LAST' | store}},{{'$store.api.Demographics.EDMpiDemogs[0].PAT_NAME_FIRST' | store}}</th>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"19%\">ManorNumber&nbsp;{{'$store.api.Demographics.EDMpiDemogs[0].UNIT_NBR' | store}}</td>\n    <td width=\"8%\"><div class=\"md-button-container ng-isolate-scope\" id=\"butBack\" right-icon=\"fa fa-close\" name=\"butBack\" type=\"button\" item-type=\"button\" theme=\"default\" md-expressions=\"{}\" originalname=\"butBack\"><a id=\"butBack\" class=\"btn btn-default\" ng-disabled=\"disabled\" onclick = \"cti.utils.callAction('go-to-page', {'name': 'PatientSearch'})\"><span class=\"fa fa-close\"></span></a></div></td>\n  </tr>\n  <tr>\n    <td>BORN {{'$store.api.Demographics.EDMpiDemogs[0].BIRTHDATE' | store}} &nbsp;&nbsp;&nbsp;&nbsp;Gender {{'$store.api.Demographics.EDMpiDemogs[0].PAT_SEX' | store}}</td>\n    <td>&nbsp;</td>\n    <td>&nbsp;</td>\n    <td>NHSNumber&nbsp;{{'$store.api.Demographics.EDMpiDemogs[0].PAT_SSN' | store}}</td>\n    <td><div class=\"md-button-container ng-isolate-scope\" id=\"butExpand\" data-toggle=\"collapse\" data-target=\"#demo\" right-icon=\"fa-arrow-circle-o-down\" name=\"butExpand\" type=\"button\" item-type=\"button\" theme=\"default\" actions=\"[]\" md-expressions=\"{}\" originalname=\"butExpand\">  <a id=\"butExpand\" class=\"btn btn-default \" md-actions=\"[]\" ng-disabled=\"disabled\"> <span class=\"fa fa-arrow-circle-o-down\"></span></a></div></td>\n  </tr>\n</table>\n<div id=\"demo\" class=\"collapse\">\n<table width=\"100%\" border=\"1\">\n  <tr>\n    <td width=\"36%\" style=\"\n    font-weight: bold;\n\">Address</td>\n    <td width=\"36%\" style=\"\n    font-weight: bold;\n\">Contact</td>\n    <td width=\"20%\" align=\"center\" style=\"\n    font-weight: bold;\n\">GP Details</td>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"5%\"></td>\n  </tr>\n</table>\n<table width=\"100%\" border=\"1\">\n  <tr>\n    <td width=\"36%\">{{'$store.api.Demographics.EDMpiDemogs[0].PAT_ADDR1' | store}}</td>\n    <td width=\"36%\">Home Number {{'$store.api.Demographics.EDMpiDemogs[0].PHONE_NBR' | store}}</td>\n    <td width=\"20%\" align=\"center\">GP {{'$store.api.Demographics.EDMpiDemogs[0].GPName' | store}}</td>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"5%\">&nbsp;</td>\n  </tr>\n  <tr>\n    <td>{{'$store.api.Demographics.EDMpiDemogs[0].PAT_ZIP' | store}}</td>\n    <td>Mobile Number {{'$store.api.Demographics.EDMpiDemogs[0].PAT_MOBILE' | store}}</td>\n    <td align=\"center\">GP Address {{'$store.api.Demographics.EDMpiDemogs[0].GPAddress' | store}}</td>\n    <td>&nbsp;</td>\n    <td>&nbsp;</td>\n  </tr>\n</table>\n</div>\n</div>","expressions":{},"classes":"PatBanner"}],"_auto_id_":"f407a6d3-3525-4f80-94bb-f8375ee5189e","expressions":{},"classes":""},{"name":"scrollable_5","type":"area","item-type":"scrollable","_auto_id_":"a6f5ca7b-1e30-4f11-91a2-423e08abe7e7","content":[{"name":"titGPAllergies","type":"content","item-type":"title","_auto_id_":"05a2273d-5c12-431b-88da-c50c445e443a","content":"<h3>Patient Allergies from GP Surgery</h3>","expressions":{}},{"name":"dgGPAllergies","type":"content","item-type":"data-grid","_auto_id_":"c96f162e-69fe-49f3-b62c-357d4ab87b18","content":[{"name":"dgGPDate","type":"content","item-type":"data-grid-column","_auto_id_":"848e7a92-fbc1-46c1-8458-0dd8bd7a747b","dataType":"date","sortable":true,"sort":"","editable":false,"heading":"Date","key":"Date"},{"name":"dgDescription","type":"content","item-type":"data-grid-column","_auto_id_":"18b486c6-dc70-4c15-a3a3-a32252642db6","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Description","key":"Description"},{"name":"dgGPNotes","type":"content","item-type":"data-grid-column","_auto_id_":"00d97be6-521e-4407-9e41-ec33750d3e27","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Notes","key":"Notes"},{"name":"dgGPNotes1","type":"content","item-type":"data-grid-column","_auto_id_":"b6347373-26d4-4ac7-a9f1-145304eccc2e","dataType":"string","sortable":true,"sort":"","editable":false,"heading":"Notes (more)","key":"Notes1"}],"sourceType":"dynamic","showSearch":"false","fixedHeaders":"true","usePagination":"true","pageSize":"10","showPagination":"true","useLocalInteraction":"false","dataSourceMethod":"GET","selectionMode":"None","model":"$store.variables.GPAllergies.AllergiesList","actions":[{"event":"selection","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.AllergyMedID = $data.rowData.AllergyMedID;\ncti.store.variables.Cause = $data.rowData.Cause;\ncti.store.variables.Reaction = $data.rowData.Reaction;\ncti.store.variables.Severity = $data.rowData.Severity;\ncti.store.variables.Certainty = $data.rowData.Certainty;\ncti.store.variables.Comments = $data.rowData.Comments;\ncti.store.pages.EditAllergy = [];\ncti.store.pages.AddAllergy.selAllergyCause = \"\";\ncti.store.pages.AddAllergy.selAllergyReaction = \"\";\ncti.store.pages.AddAllergy.selAllergySeverity = \"\";\ncti.store.pages.AddAllergy.selAllergyCertainty = \"\";\ncti.store.pages.AddAllergy.txtComments = \"\";\n$success();"},"_auto_id_":"45b174f7-6429-4afc-b815-1830f0a2993a","actions":[{"event":"success","type":"go-to-page","data":{"name":"EditAllergy","isConditional":false},"_auto_id_":"b1f91ce5-aa35-4a9a-9ece-fab27393d252"}]}],"expressions":{},"autoSaveEdits":false},{"name":"butSave","type":"button","item-type":"button","_auto_id_":"72b44307-fc04-4634-b8b1-d5ca39123ff6","content":"Save","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-api","data":{"sync":true,"name":"Form","operation":"EDSSaveForm","params":{"formID":"{{$store.variables.formID}}","Allergies":"{{$store.variables.EDAllergies}}","Comments":"{{$store.pages.Comments.txtComments}}","EDMeds":"{{$store.variables.EDMeds}}","TTOMeds":"{{$store.variables.TTOMeds}}","DisMeds":"{{$store.variables.DiscontinueMeds}}","username":"{{$store.variables.Username}}","PrescMeds":"{{$store.variables.PrescMeds}}"}},"_auto_id_":"6cd09492-714e-456d-8d15-47c8eeaac34a","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"Saved"},"_auto_id_":"4826ba6f-48d5-489e-aaed-e469662e767c"},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"LoginFail","title":"Error","text":"Unable to save, please try again"},"_auto_id_":"28386217-7d8c-4f00-ba2d-40ab1472dad4"}]}]}],"expressions":{}},{"name":"nav_footer","type":"area","item-type":"button-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"navSearch","type":"button","item-type":"nav-button","content":"Patient List","extends":{"type":"button","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":{"isConditional":false,"expressions":{},"name":"PatientSearch"},"_auto_id_":"4e98588e-2365-4002-8ff8-8fdebc7b2a9a"}],"left-icon":"fa-user","_auto_id_":"a02c9a7f-3698-4ff6-a752-8ddd6c2c0fd6","expressions":{},"theme":"default"},{"name":"navMeds","type":"button","item-type":"nav-button","_auto_id_":"c6b8f748-71f7-4d73-becf-81d05056f9f3","extends":{"type":"button","item-type":"button"},"content":"Medications","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-eyedropper"},{"name":"navAllergies","type":"button","item-type":"nav-button","_auto_id_":"60f9482d-c67f-4180-8bb8-f8e95cf48711","extends":{"type":"button","item-type":"button"},"content":"Allergies","actions":[{"event":"click","type":"go-to-page","data":{"name":"Allergies","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-exclamation"},{"name":"navComplete","type":"button","item-type":"nav-button","_auto_id_":"7b6a445c-e3ba-40f3-9cec-ec9266636792","extends":{"type":"button","item-type":"button"},"content":"Comments","actions":[{"event":"click","type":"go-to-page","data":{"name":"Comments","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-pencil"}],"_auto_id_":"a9fb866b-9e55-49eb-b355-d16448c71dfa","expressions":{}}]},{"start":false,"name":"AddAllergy","config":[],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"04689e77-17a8-4119-9d61-a2bd87ebe61b","extends":{"type":"area","item-type":"row"},"content":[{"name":"butBack","type":"button","item-type":"button","_auto_id_":"5e9cb54d-5900-471a-9c13-0f202856e1db","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Allergies","isConditional":false},"_auto_id_":"a2a4d6ab-f957-4409-8689-4cb35374c9a3"}]},{"name":"titEDSAllergyAdd","type":"content","item-type":"title","_auto_id_":"20b49577-a3a1-4db9-8936-49d5b6b2d6bc","content":"<h1>Add Patient Allergy</h1>","expressions":{}},{"name":"butAddAllergy","type":"button","item-type":"button","_auto_id_":"3dd36202-b1f2-4d83-a5dd-fc09ffe00c25","content":"","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"//create contacts array if it doesn't exist\nif(!cti.store.variables.EDAllergies){\n    cti.store.variables.EDAllergies = [];\n}\n\nAllergyMedID = cti.store.variables.EDAllergies.length;\n\n\n//save the data\ncti.store.variables.EDAllergies.push({\"AllergyMedID\":AllergyMedID,\"Cause\":cti.store.pages.AddAllergy.selAllergyCause.label,\"Reaction\":cti.store.pages.AddAllergy.selAllergyReaction.label,\"Severity\":cti.store.pages.AddAllergy.selAllergySeverity.label,\"Certainty\":cti.store.pages.AddAllergy.selAllergyCertainty.label, \"Comments\":cti.store.pages.AddAllergy.txtComments});\n\ncti.store.pages.AddAllergy.selAllergyCause = \"\";\ncti.store.pages.AddAllergy.selAllergyReaction = \"\";\ncti.store.pages.AddAllergy.selAllergySeverity = \"\";\ncti.store.pages.AddAllergy.selAllergyCertainty = \"\";\ncti.store.pages.AddAllergy.txtComments = \"\";"},"_auto_id_":"d3ec6ed3-7b30-48e7-b73d-71532d197e70","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"notificationMed","title":"Allergy Added"},"_auto_id_":"450dc4d7-7798-4e4c-b696-8954ac8ba38d"}]}],"expressions":{},"classes":"AddMedsBut","right-icon":"fa-check"}],"expressions":{}},{"name":"scrollableAddAllergyMeds","type":"area","item-type":"scrollable","_auto_id_":"bc1a09b1-0c85-48a1-a527-5d4bb01b201b","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"5cc2d36d-b807-4f94-b1ab-d2d844e92f91","content":[{"name":"title_Allergy","type":"content","item-type":"title","_auto_id_":"f916cea1-072f-4fcb-8cd7-cd07a7f081cf","content":"<h2>Patient Allergy</h2>","expressions":{}},{"name":"grpAllergy","type":"area","item-type":"group","_auto_id_":"23427fdf-8476-471f-ad2f-06c910aa9b3a","content":[{"name":"selAllergyCause","type":"choice","item-type":"select","_auto_id_":"bf366b49-5d16-40d4-9bab-267ebafd0667","label":"Cause of Allergy","required":false,"options":[{"label":"Food Allergy","value":"Food Allergy"},{"label":"Medicine","value":"Medicine"}],"expressions":{},"validators":[],"searchable":true,"classes":"MedsTable"},{"name":"selAllergyReaction","type":"choice","item-type":"select","_auto_id_":"c407b668-5926-4321-bd58-f08c9a9416d6","label":"Reaction","required":false,"options":[{"label":"Rash","value":"Rash"},{"label":"Vomiting","value":"Vomiting"}],"expressions":{},"validators":[],"searchable":true,"classes":"MedsTable"},{"name":"selAllergySeverity","type":"choice","item-type":"select","_auto_id_":"139aab36-7c8d-4cae-8560-907f78e8dd06","label":"Severity","required":false,"options":[{"label":"Mild","value":"Mild"},{"label":"Moderate","value":"Moderate"},{"label":"Severe","value":"Severe"}],"expressions":{},"validators":[],"searchable":true,"classes":"MedsTable"},{"name":"selAllergyCertainty","type":"choice","item-type":"select","_auto_id_":"07cfb9ed-7ab6-4683-9083-081a32bdb627","label":"Certainty","required":false,"options":[{"label":"Not very","value":"Not very"},{"label":"Very certain","value":"Very certain"}],"expressions":{},"validators":[],"searchable":true,"classes":"MedsTable"},{"name":"txtComments","type":"user-input","item-type":"text","_auto_id_":"70a19deb-e944-471f-a3e5-4c2f36f0bc67","label":"Comments:","required":false,"multiline":false,"debounce":250,"expressions":{}}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":false,"name":"EditAllergy","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"e40f8d8e-833d-4d9c-aa6f-599fb22f4d8a","actions":[{"event":"onpageload","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.EditAllergy.selAllergyCause = cti.store.variables.Cause;\ncti.store.pages.EditAllergy.selAllergyReaction = cti.store.variables.Reaction;\ncti.store.pages.EditAllergy.selAllergySeverity = cti.store.variables.Severity;\ncti.store.pages.EditAllergy.selAllergyCertainty = cti.store.variables.Certainty;\ncti.store.pages.EditAllergy.txtComments = cti.store.variables.Comments;\n$success();"},"_auto_id_":"00d40d0d-0203-4201-b75c-23a22e43d83c"}]}],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"6223cf44-be39-4b8d-bbd6-854e7343e64d","extends":{"type":"area","item-type":"row"},"content":[{"name":"butBack","type":"button","item-type":"button","_auto_id_":"b4289125-fb99-4d61-beda-85f13eaa3177","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Allergies","isConditional":false},"_auto_id_":"5773f7e6-b8da-4d5b-aa46-d7e33f61b4a0"}]},{"name":"titEDSAllergyEdit","type":"content","item-type":"title","_auto_id_":"70e1d079-d702-4dd1-89ac-77a223817bd8","content":"<h1>Edit Patient Allergy</h1>","expressions":{}},{"name":"butAddAllergy","type":"button","item-type":"button","_auto_id_":"0e3adb0d-9577-446c-b04b-e0eed37e1829","content":"","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"//create contacts array if it doesn't exist\nif(!cti.store.variables.EDAllergies){\n    cti.store.variables.EDAllergies = [];\n}\n\nAllergyMedID = cti.store.variables.EDAllergies.length;\n\n\n//save the data\ncti.store.variables.EDAllergies.push({\"AllergyMedID\":AllergyMedID,\"Cause\":cti.store.pages.AddAllergy.selAllergyCause.label,\"Reaction\":cti.store.pages.AddAllergy.selAllergyReaction.label,\"Severity\":cti.store.pages.AddAllergy.selAllergySeverity.label,\"Certainty\":cti.store.pages.AddAllergy.selAllergyCertainty.label, \"Comments\":cti.store.pages.AddAllergy.txtComments});\n\ncti.store.pages.AddAllergy.selAllergyCause = \"\";\ncti.store.pages.AddAllergy.selAllergyReaction = \"\";\ncti.store.pages.AddAllergy.selAllergySeverity = \"\";\ncti.store.pages.AddAllergy.selAllergyCertainty = \"\";\ncti.store.pages.AddAllergy.txtComments = \"\";"},"_auto_id_":"49a6f37d-d0bc-4f6f-8574-3614c15628fe","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"notificationMed","title":"Allergy Updated"},"_auto_id_":"35a0d0f2-72ae-45eb-a00d-f59824fc281d"}]}],"expressions":{},"classes":"AddMedsBut","right-icon":"fa-check"}],"expressions":{}},{"name":"scrollableAddAllergyMeds","type":"area","item-type":"scrollable","_auto_id_":"b025d33b-21ec-47b7-9f25-06e9164575fb","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"9dc7cd23-18a8-418b-bda8-7f4261633e89","content":[{"name":"title_Allergy","type":"content","item-type":"title","_auto_id_":"7b06dcea-91cd-432b-a8c6-f71eeee4f75f","content":"<h2>Patient Allergy</h2>","expressions":{}},{"name":"grpAllergy","type":"area","item-type":"group","_auto_id_":"7102082b-9ca5-4f01-8d06-e244b84d30ca","content":[{"name":"selAllergyCause","type":"choice","item-type":"select","_auto_id_":"b5b558c8-73c2-4399-9aa9-2cb4e925f6f6","label":"Cause of Allergy","required":false,"options":[{"label":"Food Allergy","value":"Food Allergy"},{"label":"Medicine","value":"Medicine"}],"expressions":{},"validators":[],"searchable":true,"classes":"MedsTable"},{"name":"selAllergyReaction","type":"choice","item-type":"select","_auto_id_":"70e723d2-437d-4e78-be06-9354ccf41980","label":"Reaction","required":false,"options":[{"label":"Rash","value":"Rash"},{"label":"Vomiting","value":"Vomiting"}],"expressions":{},"validators":[],"searchable":true,"classes":"MedsTable"},{"name":"selAllergySeverity","type":"choice","item-type":"select","_auto_id_":"2d17f616-e1cc-4000-bd86-3d9c7daf1306","label":"Severity","required":false,"options":[{"label":"Mild","value":"Mild"},{"label":"Moderate","value":"Moderate"},{"label":"Severe","value":"Severe"}],"expressions":{},"validators":[],"searchable":true,"classes":"MedsTable"},{"name":"selAllergyCertainty","type":"choice","item-type":"select","_auto_id_":"8c1165bd-2a1a-4eda-9534-bcf664a3206d","label":"Certainty","required":false,"options":[{"label":"Not very","value":"Not very"},{"label":"Very certain","value":"Very certain"}],"expressions":{},"validators":[],"searchable":true,"classes":"MedsTable"},{"name":"txtComments","type":"user-input","item-type":"text","_auto_id_":"e9680809-3bb3-4d10-8811-8e54de92c6ee","label":"Comments:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"butRemoveEDMed","type":"button","item-type":"button","_auto_id_":"df6a21f8-d909-4949-a5ff-f012436d5b91","content":"","theme":"default","expressions":{},"left-icon":"fa-trash","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"for (var i = 0; i < cti.store.variables.EDMeds.length;) {\n  if (cti.store.variables.EDMeds[i].EDMedID == cti.store.variables.EDMedID)\n        cti.store.variables.EDMeds.splice(cti.store.variables.EDMedID,1);\n  \t\ti=i+1;\n}\n\nfor (var i = 0; i < cti.store.variables.EDMeds.length;) {\n\tif (cti.store.variables.EDMeds[i].EDMedID >0)\n\t\tcti.store.variables.EDMeds[i].EDMedID = cti.store.variables.EDMeds[i].EDMedID-1;\n\t\ti=i+1;\n\t}"},"_auto_id_":"2bb4e8ef-af3d-4d99-9a08-a27ccfc3537d"}],"classes":"RemoveMedsBut"}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":false,"name":"Comments","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"ef015b75-6406-4a8e-ba7b-dfdc6f94ef98","actions":[{"event":"onpageload","type":"call-api","data":{"sync":true,"name":"Demographics","operation":"EDMpiDemogs","params":{"manor":"{{$store.variables.manor}}"}},"_auto_id_":"7bf164fa-1142-4686-8320-fa6611a092ef","actions":[]}]}],"content":[{"name":"scrollPatBanner","type":"area","item-type":"scrollable","content":[{"name":"htmlPatBanner","type":"content","item-type":"html","_auto_id_":"d3654756-e92c-47c8-a734-41ef2e5024f1","content":"<div class=\"container\">\n<table width=\"100%\" border=\"1\">\n  <tr>\n    <th width=\"70%\">{{'$store.api.Demographics.EDMpiDemogs[0].PAT_NAME_LAST' | store}},{{'$store.api.Demographics.EDMpiDemogs[0].PAT_NAME_FIRST' | store}}</th>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"19%\">ManorNumber&nbsp;{{'$store.api.Demographics.EDMpiDemogs[0].UNIT_NBR' | store}}</td>\n    <td width=\"8%\"><div class=\"md-button-container ng-isolate-scope\" id=\"butBack\" right-icon=\"fa fa-close\" name=\"butBack\" type=\"button\" item-type=\"button\" theme=\"default\" md-expressions=\"{}\" originalname=\"butBack\"><a id=\"butBack\" class=\"btn btn-default\" ng-disabled=\"disabled\" onclick = \"cti.utils.callAction('go-to-page', {'name': 'PatientSearch'})\"><span class=\"fa fa-close\"></span></a></div></td>\n  </tr>\n  <tr>\n    <td>BORN {{'$store.api.Demographics.EDMpiDemogs[0].BIRTHDATE' | store}} &nbsp;&nbsp;&nbsp;&nbsp;Gender {{'$store.api.Demographics.EDMpiDemogs[0].PAT_SEX' | store}}</td>\n    <td>&nbsp;</td>\n    <td>&nbsp;</td>\n    <td>NHSNumber&nbsp;{{'$store.api.Demographics.EDMpiDemogs[0].PAT_SSN' | store}}</td>\n    <td><div class=\"md-button-container ng-isolate-scope\" id=\"butExpand\" data-toggle=\"collapse\" data-target=\"#demo\" right-icon=\"fa-arrow-circle-o-down\" name=\"butExpand\" type=\"button\" item-type=\"button\" theme=\"default\" actions=\"[]\" md-expressions=\"{}\" originalname=\"butExpand\">  <a id=\"butExpand\" class=\"btn btn-default \" md-actions=\"[]\" ng-disabled=\"disabled\"> <span class=\"fa fa-arrow-circle-o-down\"></span></a></div></td>\n  </tr>\n</table>\n<div id=\"demo\" class=\"collapse\">\n<table width=\"100%\" border=\"1\">\n  <tr>\n    <td width=\"36%\" style=\"\n    font-weight: bold;\n\">Address</td>\n    <td width=\"36%\" style=\"\n    font-weight: bold;\n\">Contact</td>\n    <td width=\"20%\" align=\"center\" style=\"\n    font-weight: bold;\n\">GP Details</td>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"5%\"></td>\n  </tr>\n</table>\n<table width=\"100%\" border=\"1\">\n  <tr>\n    <td width=\"36%\">{{'$store.api.Demographics.EDMpiDemogs[0].PAT_ADDR1' | store}}</td>\n    <td width=\"36%\">Home Number {{'$store.api.Demographics.EDMpiDemogs[0].PHONE_NBR' | store}}</td>\n    <td width=\"20%\" align=\"center\">GP {{'$store.api.Demographics.EDMpiDemogs[0].GPName' | store}}</td>\n    <td width=\"1%\">&nbsp;</td>\n    <td width=\"5%\">&nbsp;</td>\n  </tr>\n  <tr>\n    <td>{{'$store.api.Demographics.EDMpiDemogs[0].PAT_ZIP' | store}}</td>\n    <td>Mobile Number {{'$store.api.Demographics.EDMpiDemogs[0].PAT_MOBILE' | store}}</td>\n    <td align=\"center\">GP Address {{'$store.api.Demographics.EDMpiDemogs[0].GPAddress' | store}}</td>\n    <td>&nbsp;</td>\n    <td>&nbsp;</td>\n  </tr>\n</table>\n</div>\n</div>","expressions":{},"classes":"PatBanner"}],"_auto_id_":"b2f7e209-193b-495d-8fd7-1e2b3fb0606b","expressions":{},"classes":""},{"name":"scrollable_5","type":"area","item-type":"scrollable","_auto_id_":"c8083783-9ea8-4054-a226-719c2e903464","content":[{"name":"titEDAllergies","type":"content","item-type":"title","_auto_id_":"234d90b2-528f-4e52-afba-81cf07718648","content":"<h3>General Comments</h3>","expressions":{}},{"name":"txtComments","type":"user-input","item-type":"text","_auto_id_":"732266c1-0cf2-4ea5-921d-968e7797f7ab","label":"General Comments:","required":false,"multiline":true,"debounce":250,"expressions":{},"validators":[],"default":"","actions":[],"placeholder":"Message to GP"},{"name":"butSave","type":"button","item-type":"button","_auto_id_":"65750156-7021-44de-b70b-42174ae0a37c","content":"Save","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-api","data":{"sync":true,"name":"Form","operation":"EDSSaveForm","params":{"formID":"{{$store.variables.formID}}","Allergies":"{{$store.variables.EDAllergies}}","Comments":"{{$store.pages.Comments.txtComments}}","EDMeds":"{{$store.variables.EDMeds}}","TTOMeds":"{{$store.variables.TTOMeds}}","DisMeds":"{{$store.variables.DiscontinueMeds}}","username":"{{$store.variables.Username}}","PrescMeds":"{{$store.variables.PrescMeds}}"}},"_auto_id_":"2b2e0524-fefc-49d9-919b-7aa2e90788bb","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"Saved"},"_auto_id_":"899743e0-0871-422a-9e3a-84dabc68de92"},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"LoginFail","title":"Error","text":"Unable to save, please try again"},"_auto_id_":"01c7a619-7264-437d-a77a-76402045b691"}]}]}],"expressions":{}},{"name":"nav_footer","type":"area","item-type":"button-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"navSearch","type":"button","item-type":"nav-button","content":"Patient List","extends":{"type":"button","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":{"isConditional":false,"expressions":{},"name":"PatientSearch"},"_auto_id_":"eb30fced-b011-46b4-9513-c5a5fde92d0c"}],"left-icon":"fa-user","_auto_id_":"5553a0da-f60a-4e26-b526-98609bc05015","expressions":{},"theme":"default"},{"name":"navMeds","type":"button","item-type":"nav-button","_auto_id_":"a10baa5c-a93b-45b3-a75a-a7f1691dd5b1","extends":{"type":"button","item-type":"button"},"content":"Medications","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-eyedropper"},{"name":"navAllergies","type":"button","item-type":"nav-button","_auto_id_":"7fd10756-df0b-465d-87f9-1ce4786c08cf","extends":{"type":"button","item-type":"button"},"content":"Allergies","actions":[{"event":"click","type":"go-to-page","data":{"name":"Allergies","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-exclamation"},{"name":"navComplete","type":"button","item-type":"nav-button","_auto_id_":"9a8444ac-1629-449c-865f-8b47e3bd8ed3","extends":{"type":"button","item-type":"button"},"content":"Comments","actions":[{"event":"click","type":"go-to-page","data":{"name":"Comments","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-pencil"}],"_auto_id_":"86c1d84f-859d-4790-8139-73b4605fdd58","expressions":{}}]},{"start":false,"name":"Login","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"b37b3e30-2ba3-4557-ace0-3262a777b4ba","actions":[{"type":"if","data":{},"_auto_id_":"d0ca1913-f515-4429-87ee-bcf848edc32c","operations":[{"type":"value","content":"{{$store.variables.varGotMeds}}"},{"type":"operator","content":"=="},{"type":"value","content":""}]},{"event":"onpageload","type":"go-to-page","data":{"name":"Ready","isConditional":false},"_auto_id_":"dff47c2e-97e7-4892-803f-4c6c83cbcb81"},{"type":"end-if","data":{},"_auto_id_":"0384d251-49a1-457b-aabd-a5d0be85373a"}]},{"name":"Page Loaded Event_1","type":"event","item-type":"onpageloaded","_auto_id_":"02045815-ea53-458c-be7f-8f4f5f428cdd","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"if (!cti.store.pages.Login){\n  cti.store.pages.Login = {};\n}\n\nif (!cti.store.pages.Login.username){\n  cti.store.pages.Login.username = {};\n}\nif (!cti.store.pages.Login.password){\n  cti.store.pages.Login.password = {};\n}\n\ncti.store.pages.Login.username = \"\";\ncti.store.pages.Login.password = \"\";\ncti.store.variables.Username = \"\";\ncti.store.variables.Password = \"\";\ncti.store.variables.User = \"\";\ndocument.getElementById(\"username\").autocomplete = \"off\"; \ndocument.getElementById(\"password\").autocomplete = \"off\"; \n$('input[name=password]').on('keydown', function(e) {\n    if (e.which == 13) {\n      \tvar keySize = 256;\n\t\tvar ivSize = 128;\n\t\tvar iterations = 100;\n\t\t\n\t\tsetTimeout(function firebut(){\n        \n\n\t\tvar message = cti.store.pages.Login.password;\n\t\tvar password = \"FB6C6579E3643ED17EEA5218498BE20A\";\n\n\t\t\n\t\tfunction encrypt (msg, pass) {\n  \t\t\tvar salt = CryptoJS.lib.WordArray.random(128/8);\n\n  \t\t\tvar key = CryptoJS.PBKDF2(pass, salt, {\n      \t\tkeySize: keySize/32,\n      \t\titerations: iterations\n    \t});\n\n  \t\tvar iv = CryptoJS.lib.WordArray.random(128/8);\n\n  \t\tvar encrypted = CryptoJS.AES.encrypt(msg, key, { \n    \t\tiv: iv, \n    \t\tpadding: CryptoJS.pad.Pkcs7,\n    \t\tmode: CryptoJS.mode.CBC\n\n  \t\t});\n\n  \t\t// salt, iv will be hex 32 in length\n  \t\t// append them to the ciphertext for use  in decryption\n  \t\tvar transitmessage = salt.toString()+ iv.toString() + encrypted.toString();\n  \t\treturn transitmessage;\n\t}\n\n\tvar encrypted = encrypt(message, password);\n\t$store.variables.Password = encrypted;\n\n\tvar message1 = $store.pages.Login.username;\n\tvar encrypted1 = encrypt(message1, password);\n\t$store.variables.User = encrypted1; \n        e.preventDefault();\n      \tvar a = angular.element(document.querySelector('a#butLogin'));\n\t\ta.triggerHandler('click');\n\t\t\n\t}, 500); \t\n    }\n});\n$success();"},"_auto_id_":"dbd9ee88-2914-46f3-9fd8-7c47c167acca","actions":[]}]}],"content":[{"name":"titBarEDMedsAllergies","type":"area","item-type":"title-bar","_auto_id_":"3cfabb1c-b381-42fd-8af5-0d7647ae6fe5","extends":{"type":"area","item-type":"row"},"content":[{"name":"titEDMedsAllergies","type":"content","item-type":"title","_auto_id_":"f3a4a74d-db4d-466e-accc-21ad165bde08","content":"<h1>Discharge Medications & Allergies</h1>","expressions":{}}],"expressions":{},"classes":"MainTitle"},{"name":"LoginStatic","type":"area","item-type":"static","_auto_id_":"bb713d79-6f36-4ee0-b3b0-20994ee6594d","content":[{"name":"username","type":"user-input","item-type":"text","_auto_id_":"b850fc3f-018b-415c-a8f4-a63e8974b060","label":"Username: ","required":true,"multiline":false,"debounce":250,"expressions":{},"description":"Please enter Fusion username","left-icon":"fa-user","actions":[],"validators":[],"message":"This is a required field"},{"name":"password","type":"user-input","item-type":"text","_auto_id_":"67716898-0b8c-40d7-a4d5-7385cb9e2f0e","label":"Password:","required":true,"multiline":false,"debounce":250,"expressions":{},"message":"This is a required field","validators":[],"actions":[{"event":"change","type":"inline-function","data":{"sync":true,"code":"var keySize = 256;\nvar ivSize = 128;\nvar iterations = 100;\n\nvar message = cti.store.pages.Login.password;\nvar password = \"FB6C6579E3643ED17EEA5218498BE20A\";\n\n\nfunction encrypt (msg, pass) {\n  var salt = CryptoJS.lib.WordArray.random(128/8);\n\n  var key = CryptoJS.PBKDF2(pass, salt, {\n      keySize: keySize/32,\n      iterations: iterations\n    });\n\n  var iv = CryptoJS.lib.WordArray.random(128/8);\n\n  var encrypted = CryptoJS.AES.encrypt(msg, key, { \n    iv: iv, \n    padding: CryptoJS.pad.Pkcs7,\n    mode: CryptoJS.mode.CBC\n\n  });\n\n  // salt, iv will be hex 32 in length\n  // append them to the ciphertext for use  in decryption\n  var transitmessage = salt.toString()+ iv.toString() + encrypted.toString();\n  return transitmessage;\n}\n\nvar encrypted = encrypt(message, password);\n$store.variables.Password = encrypted;\n\nvar message1 = $store.pages.Login.username;\nvar encrypted1 = encrypt(message1, password);\n$store.variables.User = encrypted1; \n"},"_auto_id_":"7aed65a3-d8b5-44bb-93d7-50e28ed13754","actions":[]}],"left-icon":"fa-lock","classes":"password"},{"name":"butLogin","type":"button","item-type":"button","_auto_id_":"48d5bb56-b7d7-4503-96a2-f6783b1a5be6","content":"Login","theme":"default","actions":[{"event":"click","type":"call-api","data":{"sync":true,"name":"RhapAPI","operation":"Username","params":{"Password":"{{$store.variables.Password}}","Username":"{{$store.variables.User}}"}},"_auto_id_":"ee27b2ed-14b8-4cb4-b7f0-7ce367d66cb5","actions":[]},{"type":"if","data":{},"_auto_id_":"90e0271e-13f5-4df0-97f8-1fd9cf31dfc1","operations":[{"type":"value","content":"{{$store.api.RhapAPI.Username}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"LoginState"},"_auto_id_":"37a27d8b-b2f7-4f13-9116-b650249b2977"},{"event":"click","type":"set-variable","data":{"name":"LoggedIn","value":"T"},"_auto_id_":"82c2c8cf-1715-4bde-8898-f07f2a5fd97f"},{"event":"click","type":"set-variable","data":{"name":"AutoLogin","value":"{{$store.pages.Login.username}}"},"_auto_id_":"ed2322e7-d382-4a4c-8636-dd7a0e636bf6"},{"event":"click","type":"set-variable","data":{"name":"Username","value":"{{$store.pages.Login.username}}"},"_auto_id_":"f92906c0-d561-44ea-80ce-45349b500a35"},{"event":"click","type":"call-api","data":{"sync":true,"name":"Login","operation":"LogUser","params":{"UserName":"{{$store.pages.Login.username}}","App":"EDEDS"}},"_auto_id_":"aef808d9-0588-4990-9759-9a84a52b72b7","actions":[]},{"event":"click","type":"go-to-page","data":{"name":"PatientSearch","isConditional":false},"_auto_id_":"c4f308f9-499e-43de-bbe1-a227164c9b66"},{"type":"otherwise","data":{},"_auto_id_":"4d67c783-69b1-4964-812f-74567c96637d"},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"LoginFail"},"_auto_id_":"09ecc08e-20fd-4bd5-89db-ace58f2fa8ac"},{"event":"click","type":"set-variable","data":{"name":"LoggedIn","value":"0"},"_auto_id_":"af211e36-f964-4a93-90ef-9d95eab6171c"},{"event":"click","type":"set-variable","data":{"name":"AutoUser","value":"None"},"_auto_id_":"46f81a08-1d2b-4f96-9880-f5064143d4c9"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.Login.username = \"\";\ncti.store.pages.Login.password = \"\";\n$success();"},"_auto_id_":"c8569b0f-da39-4905-af24-3d443a55b9d9"},{"type":"end-if","data":{},"_auto_id_":"feb678ca-3011-4c78-afe0-6d3d9ad30c32"}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"Discontinue","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"f4e7b9a8-19eb-4b1e-9587-4d4d2169a6c0","actions":[{"event":"onpageload","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.Discontinue.txtGPDate = cti.store.variables.GPDate;\ncti.store.pages.Discontinue.txtGPDrug = cti.store.variables.GPDrug;\ncti.store.pages.Discontinue.txtGPAmount = cti.store.variables.GPAmount;\ncti.store.pages.Discontinue.txtGPDosage = cti.store.variables.GPDosage;\n$success()"},"_auto_id_":"5cf0088a-f1a6-4d2e-9696-320c775da0dd"}]}],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"95286b2c-38d3-4899-8290-7b5863027134","extends":{"type":"area","item-type":"row"},"content":[{"name":"butGPBack","type":"button","item-type":"button","_auto_id_":"dca9d1c0-1d28-4bbc-bd63-1997c2302781","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"e1beb834-7baa-40ab-92c5-00a4141a9d2a"}]},{"name":"titGPMeds","type":"content","item-type":"title","_auto_id_":"e5823782-34f4-4922-987a-116461f9db0d","content":"<h1>GP Medication</h1>","expressions":{}}],"expressions":{}},{"name":"scrollableAddEDMeds_1","type":"area","item-type":"scrollable","_auto_id_":"088145f9-666c-4459-bd21-b38d6236acdd","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"daca3536-d0a9-4934-a9f7-78256d87690e","content":[{"name":"title_Medication_1","type":"content","item-type":"title","_auto_id_":"a7605530-86d5-4db9-bd83-f1d344660461","content":"<h2>GP Medication</h2>","expressions":{}},{"name":"grpDrugs_1","type":"area","item-type":"group","_auto_id_":"60b69bfb-8a0b-47b4-a023-4b4989c9170a","content":[{"name":"txtGPDate","type":"user-input","item-type":"text","_auto_id_":"d16093a2-a2cf-408b-9f88-b8c320728e4e","label":"Date: ","required":false,"multiline":false,"debounce":250,"expressions":{"disabled":"true"},"validators":[]},{"name":"txtGPDrug","type":"user-input","item-type":"text","_auto_id_":"6000cc43-c4a7-4a1a-9961-166548ba10b6","label":"Medication: ","required":false,"multiline":false,"debounce":250,"expressions":{"disabled":"true"}},{"name":"txtGPAmount","type":"user-input","item-type":"text","_auto_id_":"3c3e4af6-6644-4b36-ba2c-8305c630ae9e","label":"Amount: ","required":false,"multiline":false,"debounce":250,"expressions":{"disabled":"true"}},{"name":"txtGPDosage","type":"user-input","item-type":"text","_auto_id_":"5319806e-058d-4703-b1c6-bd169d8187b3","label":"Dosage: ","required":false,"multiline":false,"debounce":250,"expressions":{"disabled":"true"}},{"name":"butDiscontinue","type":"button","item-type":"button","_auto_id_":"8e1422d6-861d-4af7-afd3-0e1ff22d8f18","content":"Discontinue","theme":"default","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"//create contacts array if it doesn't exist\nif(!cti.store.variables.DiscontinueMeds){\n    cti.store.variables.DiscontinueMeds = [];\n}\n\nDisMedID = cti.store.variables.DiscontinueMeds.length;\n\n//save the data\ncti.store.variables.DiscontinueMeds.push({\"DisMedID\":DisMedID,\"Date\":cti.store.pages.Discontinue.txtGPDate,\"Drug\":cti.store.pages.Discontinue.txtGPDrug, \"Amount\":cti.store.pages.Discontinue.txtGPAmount, \"Dose\":cti.store.pages.Discontinue.txtGPDosage});\n$success();"},"_auto_id_":"4eff4f89-ee3c-4d26-9d7f-b2f1e9f44cc6","actions":[{"event":"success","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"dc86cb28-cfbe-4d43-9f45-7a3efe1ed5e9"}]}],"classes":"RemoveMedsBut"}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":false,"name":"Continue","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"c6a9c00f-8ec1-446c-b1a2-7ae180d42527","actions":[{"event":"onpageload","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.Continue.txtGPDate = cti.store.variables.GPDate;\ncti.store.pages.Continue.txtGPDrug = cti.store.variables.GPDrug;\ncti.store.pages.Continue.txtGPAmount = cti.store.variables.GPAmount;\ncti.store.pages.Continue.txtGPDosage = cti.store.variables.GPDosage;\n$success()"},"_auto_id_":"f7765961-10a7-46c2-92cf-fde22f3f49b1","actions":[]}]}],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"20e328cb-7cc5-4db1-94ff-fa2befff84ad","extends":{"type":"area","item-type":"row"},"content":[{"name":"butGPBack","type":"button","item-type":"button","_auto_id_":"7dbf5771-0b1d-4150-8ed5-46b1ae22a970","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"70a1b6bf-5e47-4288-9d4e-eb6e55d82756"}]},{"name":"titGPMeds","type":"content","item-type":"title","_auto_id_":"a130f74d-477b-42a6-a8cd-0a5de353bf48","content":"<h1>GP Medication</h1>","expressions":{}}],"expressions":{}},{"name":"scrollableAddEDMeds_1","type":"area","item-type":"scrollable","_auto_id_":"632ae0ee-0ce3-4d2e-8f30-cf33f143f773","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"aa9b17ea-0284-4f01-8462-fbbd60506c96","content":[{"name":"title_Medication_1","type":"content","item-type":"title","_auto_id_":"d0ea9986-9619-4a56-90a0-2acad4475ff6","content":"<h2>GP Medication</h2>","expressions":{}},{"name":"grpDrugs_1","type":"area","item-type":"group","_auto_id_":"84db1d65-bb0e-46d9-8e80-f98f651ee9a9","content":[{"name":"txtGPDate","type":"user-input","item-type":"text","_auto_id_":"114f208f-f6d9-40c2-b095-fa370c5451c4","label":"Date: ","required":false,"multiline":false,"debounce":250,"expressions":{"disabled":"true"},"validators":[]},{"name":"txtGPDrug","type":"user-input","item-type":"text","_auto_id_":"d4b90ae6-615b-4a1e-b37c-369a077772e1","label":"Medication: ","required":false,"multiline":false,"debounce":250,"expressions":{"disabled":"true"}},{"name":"txtGPAmount","type":"user-input","item-type":"text","_auto_id_":"f535330b-0c13-41a1-807f-5b0c4811846d","label":"Amount: ","required":false,"multiline":false,"debounce":250,"expressions":{"disabled":"true"}},{"name":"txtGPDosage","type":"user-input","item-type":"text","_auto_id_":"44b2898b-edc9-44b4-b736-be6978bd7409","label":"Dosage: ","required":false,"multiline":false,"debounce":250,"expressions":{"disabled":"true"}},{"name":"butDiscontinue","type":"button","item-type":"button","_auto_id_":"ef4978f0-62ae-4dd8-a4ee-db4fc6e7ebe8","content":"Continue","theme":"default","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"for (var i = 0; i < cti.store.variables.DiscontinueMeds.length;) {\n  if (cti.store.variables.DiscontinueMeds[i].DisMedID == cti.store.variables.DisMedID)\n        cti.store.variables.DiscontinueMeds.splice(cti.store.variables.DisMedID,1);\n  \t\ti=i+1;\n}\n\nfor (var i = 0; i < cti.store.variables.DiscontinueMeds.length;) {\n\tif (cti.store.variables.DiscontinueMeds[i].DisMedID >0)\n\t\tcti.store.variables.DiscontinueMeds[i].DisMedID = cti.store.variables.DiscontinueMeds[i].DisMedID-1;\n\t\ti=i+1;\n\t}\n$success();"},"_auto_id_":"ca74b5e7-4424-4e1d-a720-0de621a07e9e","actions":[{"event":"success","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"81ae3e03-d0dc-4423-af51-d2b5267a769f"}]}],"classes":"RemoveMedsBut"}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":false,"name":"holdEDMeds","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"93c85d4b-affb-4779-b871-28cdd06d1d04","actions":[{"event":"onpageloaded","type":"go-to-page","data":{"name":"AddEDMeds","isConditional":false},"_auto_id_":"a1286dec-2759-4908-8d61-a0a1669f7319"}]}],"content":[{"name":"scrollable_6","type":"area","item-type":"scrollable","_auto_id_":"936eb052-b1fc-4f5b-874d-50ddc965267f","content":[{"name":"html_1","type":"content","item-type":"html","_auto_id_":"502a9ccb-834e-4572-951c-348e510b98c0","content":"<h2>Added</h2>"}]}]},{"start":false,"name":"AddPrescMeds","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"45523665-25aa-4a57-9fc0-a6cb76d5ca4c","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"\ncti.store.variables.Meds1 = [];\ncti.store.variables.Meds2 = \"\";\ncti.store.variables.Meds3 = \"\";\nif (cti.store.variables.GetMeds != null){\nfor(var i=0; i< cti.store.variables.GetMeds.length;)\n{\n    cti.store.variables.Meds1.push({\"Name\":cti.store.variables.GetMeds[i].dcDesc});\n   cti.store.variables.Meds2 = cti.store.variables.Meds2 + ''+cti.store.variables.GetMeds[i].dcDesc+'#,';\n       cti.store.variables.Meds3 = cti.store.variables.Meds3 + ''+cti.store.variables.GetMeds[i].dcDesc+'#,';\n  \ti=i+1;\n \n}\n}\n\nvar string = cti.store.variables.Meds2;\nvar array = string.split('#,');\n  cti.store.variables.Meds2 = array;\nvar string1 = cti.store.variables.Meds3;\nvar array1 = string1.split('#,');\n  cti.store.variables.Meds3 = array1;\n\n\nfunction autocomplete(inp, arr) {\n  /*the autocomplete function takes two arguments,\n  the text field element and an array of possible autocompleted values:*/\n  var currentFocus;\n  /*execute a function when someone writes in the text field:*/\n  inp.addEventListener(\"input\", function(e) {\n      var a, b, i, val = this.value;\n      /*close any already open lists of autocompleted values*/\n      closeAllLists();\n      if (!val) { return false;}\n      currentFocus = -1;\n      /*create a DIV element that will contain the items (values):*/\n      a = document.createElement(\"DIV\");\n      a.setAttribute(\"id\", this.id + \"autocomplete-list\");\n      a.setAttribute(\"class\", \"autocomplete-items\");\n      /*append the DIV element as a child of the autocomplete container:*/\n      this.parentNode.appendChild(a);\n      /*for each item in the array...*/\n      for (i = 0; i < arr.length; i++) {\n        /*check if the item starts with the same letters as the text field value:*/\n                 var str = arr[i].toUpperCase();\n  var patt = new RegExp(val.toUpperCase());\n  var res = patt.test(str);\n      if (res == true) {\n          b = document.createElement(\"DIV\");\n\n  b.innerHTML += arr[i];\n          b.innerHTML += \"<input type='hidden' value='\" + arr[i] + \"'>\";\n           b.addEventListener(\"click\", function(e) {\n              inp.value = this.getElementsByTagName(\"input\")[0].value;\n                      for (var j = 0; j < cti.store.variables.Meds3.length;) {\n \t\t\t if (cti.store.variables.Meds2[j] == inp.value){        \n               document.getElementById(\"DrugPrescMed\").value =  cti.store.variables.Meds3[j];\n                  }\n \t \t\t\t\tj=j+1;\n\t\t\t\t}\n             closeAllLists();\n          });\n          a.appendChild(b);\n        }\n      }\n  });\n  /*execute a function presses a key on the keyboard:*/\n  inp.addEventListener(\"keydown\", function(e) {\n      var x = document.getElementById(this.id + \"autocomplete-list\");\n      if (x) x = x.getElementsByTagName(\"div\");\n      if (e.keyCode == 40) {\n        /*If the arrow DOWN key is pressed,\n        increase the currentFocus variable:*/\n        currentFocus++;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 38) { //up\n        /*If the arrow UP key is pressed,\n        decrease the currentFocus variable:*/\n        currentFocus--;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 13) {\n        /*If the ENTER key is pressed, prevent the form from being submitted,*/\n        e.preventDefault();\n        if (currentFocus > -1) {\n          /*and simulate a click on the \"active\" item:*/\n          if (x) x[currentFocus].click();\n        }\n      }\n  });\n  function addActive(x) {\n    /*a function to classify an item as \"active\":*/\n    if (!x) return false;\n    /*start by removing the \"active\" class on all items:*/\n    removeActive(x);\n    if (currentFocus >= x.length) currentFocus = 0;\n    if (currentFocus < 0) currentFocus = (x.length - 1);\n    /*add class \"autocomplete-active\":*/\n    x[currentFocus].classList.add(\"autocomplete-active\");\n  }\n  function removeActive(x) {\n    /*a function to remove the \"active\" class from all autocomplete items:*/\n    for (var i = 0; i < x.length; i++) {\n      x[i].classList.remove(\"autocomplete-active\");\n    }\n  }\n  function closeAllLists(elmnt) {\n    /*close all autocomplete lists in the document,\n    except the one passed as an argument:*/\n    var x = document.getElementsByClassName(\"autocomplete-items\");\n    for (var i = 0; i < x.length; i++) {\n      if (elmnt != x[i] && elmnt != inp) {\n        x[i].parentNode.removeChild(x[i]);\n      }\n    }\n  }\n  /*execute a function when someone clicks in the document:*/\n  document.addEventListener(\"click\", function (e) {\n      closeAllLists(e.target);\n  });\n}\n\nvar DiagArray =cti.store.variables.Meds2 ;\n\n/*initiate the autocomplete function on the \"myInput\" element, and pass along the countries array as possible autocomplete values:*/\nautocomplete(document.getElementById(\"DrugPrescMed1\"), DiagArray);\n$success();"},"_auto_id_":"f7c96799-9381-406b-82b3-f8c918f4500e"}]}],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"1b57dda8-53cd-475a-ad53-47f6714c9065","extends":{"type":"area","item-type":"row"},"content":[{"name":"butBack","type":"button","item-type":"button","_auto_id_":"34045103-7227-4f11-9909-50473f903d9a","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"be3a653e-166d-4ab1-87b4-54dc9306583b"}]},{"name":"titEDSMedsAdd","type":"content","item-type":"title","_auto_id_":"76c7de1d-8f42-4072-84b8-d1ce390f03a7","content":"<h1>Add Prescription Given</h1>","expressions":{}},{"name":"butAddMeds","type":"button","item-type":"button","_auto_id_":"b8ed4fd2-537f-4493-b45c-ab505c525e50","content":"","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"//create contacts array if it doesn't exist\nif(!cti.store.variables.PrescMeds){\n    cti.store.variables.PrescMeds = [];\n}\n\nPrescMedID = cti.store.variables.PrescMeds.length;\n\n//save the data\ncti.store.variables.PrescMeds.push({\"PrescMedID\":PrescMedID,\"Type\":cti.store.pages.AddPrescMeds.radPrescType,\"Drug\":document.getElementById(\"DrugPrescMed1\").value, \"Route\":cti.store.pages.AddPrescMeds.selRoute.label, \"Site\":cti.store.pages.AddPrescMeds.txtSite, \"Dose\":cti.store.pages.AddPrescMeds.numDose, \"Unit\":cti.store.pages.AddPrescMeds.selUnits.label, \"Freq\":cti.store.pages.AddPrescMeds.txtFreq, \"Date\":cti.store.pages.AddPrescMeds.dtGivenMeds.time, \"Comments\":cti.store.pages.AddPrescMeds.txtComments, \"PrescribeName\":cti.store.pages.AddPrescMeds.txtPrescribeName,\"AdminName\":cti.store.pages.AddPrescMeds.txtAdminName,\"CheckedName\":cti.store.pages.AddPrescMeds.txtCheckedName});\n\ndocument.getElementById(\"DrugPrescMed\").value = \"\";\ndocument.getElementById(\"DrugPrescMed1\").value = \"\";\ncti.store.pages.AddPrescMeds.radPrescType = \"\";\ncti.store.pages.AddPrescMeds.selRoute = \"\";\ncti.store.pages.AddPrescMeds.txtSite = \"\";\ncti.store.pages.AddPrescMeds.numDose = \"\";\ncti.store.pages.AddPrescMeds.selDose = \"\";\ncti.store.pages.AddPrescMeds.selUnits = \"\";\ncti.store.pages.AddPrescMeds.txtFreq = \"\";\ncti.store.pages.AddPrescMeds.dtGivenMeds.time = \"\";\ncti.store.pages.AddPrescMeds.dtGivenMeds = [];\ncti.store.pages.AddPrescMeds.txtComments = \"\";\ncti.store.pages.AddPrescMeds.txtPrescribeName = \"\";\ncti.store.pages.AddPrescMeds.txtAdminName = \"\";\ncti.store.pages.AddPrescMeds.txtCheckedName = \"\";\n$success()"},"_auto_id_":"4ed5453f-fb5d-447f-99f5-41ef6a89bf07","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"notificationMed"},"_auto_id_":"fb7fe1d7-5789-4626-920b-9fefdbf84fcd"},{"event":"success","type":"go-to-page","data":{"name":"holdPrescMeds","isConditional":false},"_auto_id_":"06e7d928-81bf-428f-9179-55dae76a3668"}]}],"expressions":{},"classes":"AddMedsBut","right-icon":"fa-check"}],"expressions":{}},{"name":"scrollableAddEDMeds_1","type":"area","item-type":"scrollable","_auto_id_":"ff619391-f8c8-4798-8f4c-34faa9c31629","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"c89d2877-2c11-4ec1-9dc1-8be23752abd0","content":[{"name":"title_Medication_1","type":"content","item-type":"title","_auto_id_":"86a17e2a-70b6-434a-a850-4c6d8ace2b77","content":"<h2>Add Prescription Given</h2>","expressions":{}},{"name":"grpDrugs_1","type":"area","item-type":"group","_auto_id_":"7d4e7ebe-3e03-44fd-b032-e65d247912f5","content":[{"name":"radPrescType","type":"choice","item-type":"radio","_auto_id_":"59e648a3-fea8-470b-adcb-cd2c150f3e08","label":"Prescription Type: ","required":false,"options":[{"label":"Internal (yellow)","value":"Internal"},{"label":"External FP 10 (green)","value":"External"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"default":"\"Internal\""}},{"name":"dtGivenMeds","type":"component","item-type":"web-component","content":[],"componentId":"5feae92d-49d9-4329-abbf-52d9cdf7bffa","_auto_id_":"d1ec28bc-e3fd-4583-8116-beb8e72d488d","attributes":{"label":"Date Time Given"},"expressions":{},"actions":[]},{"name":"htmlPrescMedDrugs","type":"content","item-type":"html","_auto_id_":"d0646f99-829b-4885-ae51-88183cae6cc5","content":"<div class=\"autocomplete\" style=\"width:100%;\">\n  <label class=\"control-label ng-binding\">Drug:</label></br>\n           <input id=\"DrugPrescMed1\" type=\"text\" name=\"myCountry\" placeholder=\"Drugs\">\n      <input type=\"hidden\" id=\"DrugPrescMed\" name=\"DrugPrescMed\" value=\"\">\n  </div>","expressions":{}},{"name":"selRoute","type":"choice","item-type":"select","_auto_id_":"cc30e46a-4fb0-43ab-8ad6-2846e9cfe43c","label":"Route:","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDRoute","label-property":"Route","value-property":"Route"},{"name":"txtSite","type":"user-input","item-type":"text","_auto_id_":"3c918919-bd8e-40f4-a5d3-b7634f8115e7","label":"Site: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"rowDose","type":"area","item-type":"row","_auto_id_":"e8160813-2e1e-4c35-aeef-3979aefa2d25","content":[{"name":"numDose","type":"user-input","item-type":"number","_auto_id_":"4f38fd5c-6406-44d0-89eb-ae0c4d2dca98","label":"Dose: ","required":false,"decimals":2,"expressions":{}},{"name":"selUnits","type":"choice","item-type":"select","_auto_id_":"540e6441-7a7e-47ef-b722-e89588c8816d","label":"Units: ","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDDose","label-property":"Dose","value-property":"Dose"},{"name":"txtFreq","type":"user-input","item-type":"text","_auto_id_":"4bd7b228-93bb-449f-8d77-2f096b554122","label":"Frequency:","required":false,"multiline":false,"debounce":250,"expressions":{}}],"expressions":{}},{"name":"txtComments","type":"user-input","item-type":"text","_auto_id_":"fda8bd2f-a2ef-491b-8ba0-f01a2ae96e4e","label":"Comments:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtPrescribeName","type":"user-input","item-type":"text","_auto_id_":"5704fc74-7458-4d4c-adaf-230a5803cd22","label":"Precribed By:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtAdminName","type":"user-input","item-type":"text","_auto_id_":"17578e67-5824-4f8e-b545-288421578d6d","label":"Administered By: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtCheckedName","type":"user-input","item-type":"text","_auto_id_":"e8022d27-4c34-4c80-8c52-df770919bf2f","label":"Checked By: ","required":false,"multiline":false,"debounce":250,"expressions":{}}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":false,"name":"EditPrescMeds","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"f27b10be-f084-4d16-98b2-bf05e0bf6ed9","actions":[{"event":"onpageload","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.EditPrescMeds.radPrescType = cti.store.variables.PrescType;\ncti.store.pages.EditPrescMeds.selRoute.label = cti.store.variables.PrescRoute;\ncti.store.pages.EditPrescMeds.selRoute.value = cti.store.variables.PrescRoute;\ncti.store.pages.EditPrescMeds.txtSite = cti.store.variables.PrescSite;\ncti.store.pages.EditPrescMeds.numDose = cti.store.variables.PrescDose;\ncti.store.pages.EditPrescMeds.selUnits.label = cti.store.variables.PrescUnit;\ncti.store.pages.EditPrescMeds.selUnits.value = cti.store.variables.PrescUnit;\ncti.store.pages.EditPrescMeds.txtFreq = cti.store.variables.PrescFreq;\ncti.store.pages.EditPrescMeds.dtGivenMeds.time = cti.store.variables.PrescDate;\ncti.store.pages.EditPrescMeds.txtComments = cti.store.variables.PrescComments;\ncti.store.pages.EditPrescMeds.txtPrescribeName = cti.store.variables.PrescPrescribeName;\ncti.store.pages.EditPrescMeds.txtAdminName = cti.store.variables.PrescAdminName;\ncti.store.pages.EditPrescMeds.txtCheckedName = cti.store.variables.PrescCheckedName;\ncti.store.pages.EditPrescMeds.sigChecked = cti.store.variables.PrescsigChecked;\n$success()"},"_auto_id_":"2308d3c8-9157-4466-8194-9dec3ecba2a8"}]},{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"7ec97783-d225-4967-809e-741c20495213","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"\ncti.store.variables.Meds1 = [];\ncti.store.variables.Meds2 = \"\";\ncti.store.variables.Meds3 = \"\";\nif (cti.store.variables.GetMeds != null){\nfor(var i=0; i< cti.store.variables.GetMeds.length;)\n{\n    cti.store.variables.Meds1.push({\"Name\":cti.store.variables.GetMeds[i].dcDesc});\n   cti.store.variables.Meds2 = cti.store.variables.Meds2 + ''+cti.store.variables.GetMeds[i].dcDesc+'#,';\n       cti.store.variables.Meds3 = cti.store.variables.Meds3 + ''+cti.store.variables.GetMeds[i].dcDesc+'#,';\n  \ti=i+1;\n \n}\n}\n\nvar string = cti.store.variables.Meds2;\nvar array = string.split('#,');\n  cti.store.variables.Meds2 = array;\nvar string1 = cti.store.variables.Meds3;\nvar array1 = string1.split('#,');\n  cti.store.variables.Meds3 = array1;\n\n\nfunction autocomplete(inp, arr) {\n  /*the autocomplete function takes two arguments,\n  the text field element and an array of possible autocompleted values:*/\n  var currentFocus;\n  /*execute a function when someone writes in the text field:*/\n  inp.addEventListener(\"input\", function(e) {\n      var a, b, i, val = this.value;\n      /*close any already open lists of autocompleted values*/\n      closeAllLists();\n      if (!val) { return false;}\n      currentFocus = -1;\n      /*create a DIV element that will contain the items (values):*/\n      a = document.createElement(\"DIV\");\n      a.setAttribute(\"id\", this.id + \"autocomplete-list\");\n      a.setAttribute(\"class\", \"autocomplete-items\");\n      /*append the DIV element as a child of the autocomplete container:*/\n      this.parentNode.appendChild(a);\n      /*for each item in the array...*/\n      for (i = 0; i < arr.length; i++) {\n        /*check if the item starts with the same letters as the text field value:*/\n                 var str = arr[i].toUpperCase();\n  var patt = new RegExp(val.toUpperCase());\n  var res = patt.test(str);\n      if (res == true) {\n          b = document.createElement(\"DIV\");\n\n  b.innerHTML += arr[i];\n          b.innerHTML += \"<input type='hidden' value='\" + arr[i] + \"'>\";\n           b.addEventListener(\"click\", function(e) {\n              inp.value = this.getElementsByTagName(\"input\")[0].value;\n                      for (var j = 0; j < cti.store.variables.Meds3.length;) {\n \t\t\t if (cti.store.variables.Meds2[j] == inp.value){        \n               document.getElementById(\"EditPrescDrugMed\").value =  cti.store.variables.Meds3[j];\n                  }\n \t \t\t\t\tj=j+1;\n\t\t\t\t}\n             closeAllLists();\n          });\n          a.appendChild(b);\n        }\n      }\n  });\n  /*execute a function presses a key on the keyboard:*/\n  inp.addEventListener(\"keydown\", function(e) {\n      var x = document.getElementById(this.id + \"autocomplete-list\");\n      if (x) x = x.getElementsByTagName(\"div\");\n      if (e.keyCode == 40) {\n        /*If the arrow DOWN key is pressed,\n        increase the currentFocus variable:*/\n        currentFocus++;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 38) { //up\n        /*If the arrow UP key is pressed,\n        decrease the currentFocus variable:*/\n        currentFocus--;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 13) {\n        /*If the ENTER key is pressed, prevent the form from being submitted,*/\n        e.preventDefault();\n        if (currentFocus > -1) {\n          /*and simulate a click on the \"active\" item:*/\n          if (x) x[currentFocus].click();\n        }\n      }\n  });\n  function addActive(x) {\n    /*a function to classify an item as \"active\":*/\n    if (!x) return false;\n    /*start by removing the \"active\" class on all items:*/\n    removeActive(x);\n    if (currentFocus >= x.length) currentFocus = 0;\n    if (currentFocus < 0) currentFocus = (x.length - 1);\n    /*add class \"autocomplete-active\":*/\n    x[currentFocus].classList.add(\"autocomplete-active\");\n  }\n  function removeActive(x) {\n    /*a function to remove the \"active\" class from all autocomplete items:*/\n    for (var i = 0; i < x.length; i++) {\n      x[i].classList.remove(\"autocomplete-active\");\n    }\n  }\n  function closeAllLists(elmnt) {\n    /*close all autocomplete lists in the document,\n    except the one passed as an argument:*/\n    var x = document.getElementsByClassName(\"autocomplete-items\");\n    for (var i = 0; i < x.length; i++) {\n      if (elmnt != x[i] && elmnt != inp) {\n        x[i].parentNode.removeChild(x[i]);\n      }\n    }\n  }\n  /*execute a function when someone clicks in the document:*/\n  document.addEventListener(\"click\", function (e) {\n      closeAllLists(e.target);\n  });\n}\n\nvar DiagArray =cti.store.variables.Meds2 ;\n\n/*initiate the autocomplete function on the \"myInput\" element, and pass along the countries array as possible autocomplete values:*/\nautocomplete(document.getElementById(\"EditPrescDrugMed1\"), DiagArray);\ndocument.getElementById(\"EditPrescDrugMed1\").value = cti.store.variables.PrescDrug;"},"_auto_id_":"aa566ebb-842a-46f9-94a3-3831ab0d9427"}]}],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"668180ae-65f1-4779-85cf-8d084462438f","extends":{"type":"area","item-type":"row"},"content":[{"name":"butBack","type":"button","item-type":"button","_auto_id_":"7a1c3888-d23a-4f44-b0ef-fce0057f0d1f","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"af14f4c4-7b5c-4ddc-919c-75ead7dca9f2"}]},{"name":"titEDSMedsAdd","type":"content","item-type":"title","_auto_id_":"0d636821-0e21-44b3-a016-1a928536de06","content":"<h1>Edit Prescription Given</h1>","expressions":{}},{"name":"butEditMeds","type":"button","item-type":"button","_auto_id_":"ba8858b6-bae7-48fb-a394-6de54ba560b5","content":"","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"for (var i = 0; i < cti.store.variables.PrescMeds.length;) {\n  if (cti.store.variables.PrescMeds[i].PrescMedID == cti.store.variables.PrescMedID)\n        cti.store.variables.PrescMeds.splice(cti.store.variables.PrescMedID,1);\n  \t\ti=i+1;\n}\n\nPrescMedID = cti.store.variables.PrescMedID;\n\n//save the data\ncti.store.variables.PrescMeds.push({\"PrescMedID\":PrescMedID,\"PrescType\":cti.store.pages.EditPrescMeds.radPrescType,\"Drug\":document.getElementById(\"EditPrescDrugMed1\").value, \"Route\":cti.store.pages.EditPrescMeds.selRoute.label, \"Site\":cti.store.pages.EditPrescMeds.txtSite, \"Dose\":cti.store.pages.EditPrescMeds.numDose, \"Unit\":cti.store.pages.EditPrescMeds.selUnits.label, \"Freq\":cti.store.pages.EditPrescMeds.txtFreq, \"Date\":cti.store.pages.EditPrescMeds.dtGivenMeds.time, \"Comments\":cti.store.pages.EditPrescMeds.txtComments, \"PrescribeName\":cti.store.pages.EditPrescMeds.txtPrescribeName,\"AdminName\":cti.store.pages.EditPrescMeds.txtAdminName,\"CheckedName\":cti.store.pages.EditPrescMeds.txtCheckedName});\n$success()"},"_auto_id_":"6e6aa91a-4a7d-4a11-a77d-b61c3f779e63","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"notificationMed","title":"Medication Updated"},"_auto_id_":"366d4bb9-c510-4fd1-b854-6c9d9cb8c6b9"},{"event":"success","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"6a73e60f-c6e4-4db2-8fe9-d4bd82b3119a"}]}],"expressions":{},"classes":"AddMedsBut","right-icon":"fa-check"}],"expressions":{}},{"name":"scrollableAddEDMeds_1","type":"area","item-type":"scrollable","_auto_id_":"a44c58dd-035f-4243-80d6-8d4710a68baa","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"b5527cb8-744e-46da-92fd-63783cb314e0","content":[{"name":"title_Medication_1","type":"content","item-type":"title","_auto_id_":"ece36460-451f-4703-b1ff-d437ff498b15","content":"<h2>Edit Prescription Given</h2>","expressions":{}},{"name":"grpDrugs_1","type":"area","item-type":"group","_auto_id_":"3122e12c-a249-4e14-ad14-4eee49aa84c1","content":[{"name":"radPrescType","type":"choice","item-type":"radio","_auto_id_":"a46f9f66-5bac-48fa-b209-570a3431c914","label":"Prescription Type: ","required":false,"options":[{"label":"Internal (yellow)","value":"Internal"},{"label":"External FP 10 (green)","value":"External"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"default":"\"Internal\""}},{"name":"dtGivenMeds","type":"component","item-type":"web-component","content":[],"componentId":"5feae92d-49d9-4329-abbf-52d9cdf7bffa","_auto_id_":"d332f81e-2c88-4db7-8f49-01ee521cebf2","attributes":{"label":"Date Time Given"},"expressions":{},"actions":[]},{"name":"htmlMedDrugs","type":"content","item-type":"html","_auto_id_":"3b1e45e2-1465-493a-9481-dfff81ccdf0d","content":"<div class=\"autocomplete\" style=\"width:100%;\">\n  <label class=\"control-label ng-binding\">Drug:</label></br>\n           <input id=\"EditPrescDrugMed1\" type=\"text\" name=\"myCountry\" placeholder=\"Drugs\">\n      <input type=\"hidden\" id=\"EditPrescDrugMed\" name=\"EditPrescDrugMed\" value=\"\">\n  </div>","expressions":{}},{"name":"selRoute","type":"choice","item-type":"select","_auto_id_":"d0e11b86-cfdc-41f5-8bed-c9a19cebe7f0","label":"Route:","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDRoute","label-property":"Route","value-property":"Route"},{"name":"txtSite","type":"user-input","item-type":"text","_auto_id_":"568ada14-2dfe-4ce4-b4c0-83f598a99b2d","label":"Site: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"rowDose","type":"area","item-type":"row","_auto_id_":"48bc99fe-54af-4e24-9b18-80c7be6b705e","content":[{"name":"numDose","type":"user-input","item-type":"number","_auto_id_":"429211dd-cc1e-497c-aaf5-5a49430fb14b","label":"Dose: ","required":false,"decimals":2,"expressions":{}},{"name":"selUnits","type":"choice","item-type":"select","_auto_id_":"00a5f1a1-af3c-47aa-a1f6-1adb3b0ac4dc","label":"Units: ","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDDose","label-property":"Dose","value-property":"Dose"},{"name":"txtFreq","type":"user-input","item-type":"text","_auto_id_":"dcae9ac7-9832-4664-89b9-324a529ee99c","label":"Frequency: ","required":false,"multiline":false,"debounce":250,"expressions":{}}],"expressions":{}},{"name":"txtComments","type":"user-input","item-type":"text","_auto_id_":"e2b86af7-bbb4-44bc-a670-b58a506f5cd2","label":"Comments:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtPrescribeName","type":"user-input","item-type":"text","_auto_id_":"938ccd33-57ef-4917-a729-01f4152f2779","label":"Precribed By:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtAdminName","type":"user-input","item-type":"text","_auto_id_":"72ef05c1-fcec-42fc-9f4f-5bc1a5fd0b33","label":"Administered By: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtCheckedName","type":"user-input","item-type":"text","_auto_id_":"87302a93-d3b3-42b1-a5fe-76bec5d90371","label":"Checked By: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"butRemoveEDMed","type":"button","item-type":"button","_auto_id_":"b3ffcf80-ba2e-4959-b8cd-897eb2917726","content":"","theme":"default","expressions":{},"left-icon":"fa-trash","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"for (var i = 0; i < cti.store.variables.PrescMeds.length;) {\n  if (cti.store.variables.PrescMeds[i].PrescMedID == cti.store.variables.PrescMedID)\n        cti.store.variables.PrescMeds.splice(cti.store.variables.PrescMedID,1);\n  \t\ti=i+1;\n}\n\nfor (var i = 0; i < cti.store.variables.PrescMeds.length;) {\n\tif (cti.store.variables.PrescMeds[i].PrescMedID >0)\n\t\tcti.store.variables.PrescMeds[i].PrescMedID = cti.store.variables.PrescMeds[i].PrescMedID-1;\n\t\ti=i+1;\n\t}\n$success()"},"_auto_id_":"513dfba6-bfbd-448d-bfda-a7c394451378","actions":[{"event":"success","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"ed8a906f-5bae-46f0-9d47-95b666478b9a"}]}],"classes":"RemoveMedsBut"}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":false,"name":"holdPrescMeds","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"719e2f64-5c53-40db-bdeb-6633b04efb6d","actions":[{"event":"onpageloaded","type":"go-to-page","data":{"name":"AddPrescMeds","isConditional":false},"_auto_id_":"a87a0730-0c53-4659-a614-65a297e7eb0b"}]}],"content":[{"name":"scrollable_6","type":"area","item-type":"scrollable","_auto_id_":"e813e121-6e60-4a00-bc7b-1dbf62b21aad","content":[{"name":"html_1","type":"content","item-type":"html","_auto_id_":"5e1fb779-0769-47aa-8695-7fb3d86c8d62","content":"<h2>Added</h2>"}]}]},{"start":false,"name":"AddTTOMeds","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"b314bffb-dc01-48c9-851b-70e28d792da3","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"\ncti.store.variables.Meds1 = [];\ncti.store.variables.Meds2 = \"\";\ncti.store.variables.Meds3 = \"\";\nif (cti.store.variables.GetEDMeds != null){\nfor(var i=0; i< cti.store.variables.GetEDMeds.length;)\n{\n    cti.store.variables.Meds1.push({\"Name\":cti.store.variables.GetEDMeds[i].dcDesc});\n   cti.store.variables.Meds2 = cti.store.variables.Meds2 + ''+cti.store.variables.GetEDMeds[i].dcDesc+'#,';\n       cti.store.variables.Meds3 = cti.store.variables.Meds3 + ''+cti.store.variables.GetEDMeds[i].dcDesc+'#,';\n  \ti=i+1;\n \n}\n}\n\nvar string = cti.store.variables.Meds2;\nvar array = string.split('#,');\n  cti.store.variables.Meds2 = array;\nvar string1 = cti.store.variables.Meds3;\nvar array1 = string1.split('#,');\n  cti.store.variables.Meds3 = array1;\n\n\nfunction autocomplete(inp, arr) {\n  /*the autocomplete function takes two arguments,\n  the text field element and an array of possible autocompleted values:*/\n  var currentFocus;\n  /*execute a function when someone writes in the text field:*/\n  inp.addEventListener(\"input\", function(e) {\n      var a, b, i, val = this.value;\n      /*close any already open lists of autocompleted values*/\n      closeAllLists();\n      if (!val) { return false;}\n      currentFocus = -1;\n      /*create a DIV element that will contain the items (values):*/\n      a = document.createElement(\"DIV\");\n      a.setAttribute(\"id\", this.id + \"autocomplete-list\");\n      a.setAttribute(\"class\", \"autocomplete-items\");\n      /*append the DIV element as a child of the autocomplete container:*/\n      this.parentNode.appendChild(a);\n      /*for each item in the array...*/\n      for (i = 0; i < arr.length; i++) {\n        /*check if the item starts with the same letters as the text field value:*/\n                 var str = arr[i].toUpperCase();\n  var patt = new RegExp(val.toUpperCase());\n  var res = patt.test(str);\n      if (res == true) {\n          b = document.createElement(\"DIV\");\n\n  b.innerHTML += arr[i];\n          b.innerHTML += \"<input type='hidden' value='\" + arr[i] + \"'>\";\n           b.addEventListener(\"click\", function(e) {\n              inp.value = this.getElementsByTagName(\"input\")[0].value;\n                      for (var j = 0; j < cti.store.variables.Meds3.length;) {\n \t\t\t if (cti.store.variables.Meds2[j] == inp.value){        \n               document.getElementById(\"DrugMedTTO\").value =  cti.store.variables.Meds3[j];\n                  }\n \t \t\t\t\tj=j+1;\n\t\t\t\t}\n             closeAllLists();\n          });\n          a.appendChild(b);\n        }\n      }\n  });\n  /*execute a function presses a key on the keyboard:*/\n  inp.addEventListener(\"keydown\", function(e) {\n      var x = document.getElementById(this.id + \"autocomplete-list\");\n      if (x) x = x.getElementsByTagName(\"div\");\n      if (e.keyCode == 40) {\n        /*If the arrow DOWN key is pressed,\n        increase the currentFocus variable:*/\n        currentFocus++;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 38) { //up\n        /*If the arrow UP key is pressed,\n        decrease the currentFocus variable:*/\n        currentFocus--;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 13) {\n        /*If the ENTER key is pressed, prevent the form from being submitted,*/\n        e.preventDefault();\n        if (currentFocus > -1) {\n          /*and simulate a click on the \"active\" item:*/\n          if (x) x[currentFocus].click();\n        }\n      }\n  });\n  function addActive(x) {\n    /*a function to classify an item as \"active\":*/\n    if (!x) return false;\n    /*start by removing the \"active\" class on all items:*/\n    removeActive(x);\n    if (currentFocus >= x.length) currentFocus = 0;\n    if (currentFocus < 0) currentFocus = (x.length - 1);\n    /*add class \"autocomplete-active\":*/\n    x[currentFocus].classList.add(\"autocomplete-active\");\n  }\n  function removeActive(x) {\n    /*a function to remove the \"active\" class from all autocomplete items:*/\n    for (var i = 0; i < x.length; i++) {\n      x[i].classList.remove(\"autocomplete-active\");\n    }\n  }\n  function closeAllLists(elmnt) {\n    /*close all autocomplete lists in the document,\n    except the one passed as an argument:*/\n    var x = document.getElementsByClassName(\"autocomplete-items\");\n    for (var i = 0; i < x.length; i++) {\n      if (elmnt != x[i] && elmnt != inp) {\n        x[i].parentNode.removeChild(x[i]);\n      }\n    }\n  }\n  /*execute a function when someone clicks in the document:*/\n  document.addEventListener(\"click\", function (e) {\n      closeAllLists(e.target);\n  });\n}\n\nvar DiagArray =cti.store.variables.Meds2 ;\n\n/*initiate the autocomplete function on the \"myInput\" element, and pass along the countries array as possible autocomplete values:*/\nautocomplete(document.getElementById(\"DrugMed1TTO\"), DiagArray);\n$success();"},"_auto_id_":"57670a07-a890-4a53-a231-580959243564"}]}],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"ad3f9efa-726c-4008-a976-0f2dce31e74c","extends":{"type":"area","item-type":"row"},"content":[{"name":"butBack","type":"button","item-type":"button","_auto_id_":"4ab44fb7-e0ab-46ee-bb98-00edaf3f3ad6","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"0ceda3f0-fe63-4da4-be8f-55d49048be45"}]},{"name":"titEDSMedsAdd","type":"content","item-type":"title","_auto_id_":"39de916a-2be6-44d7-8566-c24436a8009d","content":"<h1>Add TTO Medication</h1>","expressions":{}},{"name":"butAddMeds","type":"button","item-type":"button","_auto_id_":"1991abda-ce94-49a8-b984-eb4c7fbf78fa","content":"","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"//create contacts array if it doesn't exist\nif(!cti.store.variables.TTOMeds){\n    cti.store.variables.TTOMeds = [];\n}\n\nTTOMedID = cti.store.variables.TTOMeds.length;\n\n//save the data\ncti.store.variables.TTOMeds.push({\"TTOMedID\":TTOMedID,\"Drug\":document.getElementById(\"DrugMed1TTO\").value, \"Route\":cti.store.pages.AddTTOMeds.selRoute.label, \"Site\":cti.store.pages.AddTTOMeds.txtSite, \"Dose\":cti.store.pages.AddTTOMeds.numDose, \"Unit\":cti.store.pages.AddTTOMeds.selUnits.label, \"Freq\":cti.store.pages.AddTTOMeds.txtFreq, \"Date\":cti.store.pages.AddTTOMeds.dtGivenMeds.time, \"Comments\":cti.store.pages.AddTTOMeds.txtComments, \"PrescribeName\":cti.store.pages.AddTTOMeds.txtPrescribeName,\"AdminName\":cti.store.pages.AddTTOMeds.txtAdminName,\"CheckedName\":cti.store.pages.AddTTOMeds.txtCheckedName});\n\ndocument.getElementById(\"DrugMedTTO\").value = \"\";\ndocument.getElementById(\"DrugMed1TTO\").value = \"\";\ncti.store.pages.AddTTOMeds.selRoute = \"\";\ncti.store.pages.AddTTOMeds.txtSite = \"\";\ncti.store.pages.AddTTOMeds.numDose = \"\";\ncti.store.pages.AddTTOMeds.selDose = \"\";\ncti.store.pages.AddTTOMeds.selUnits = \"\";\ncti.store.pages.AddTTOMeds.txtFreq = \"\";\ncti.store.pages.AddTTOMeds.dtGivenMeds.time = \"\";\ncti.store.pages.AddTTOMeds.dtGivenMeds = [];\ncti.store.pages.AddTTOMeds.txtComments = \"\";\ncti.store.pages.AddTTOMeds.txtPrescribeName = \"\";\ncti.store.pages.AddTTOMeds.txtAdminName = \"\";\ncti.store.pages.AddTTOMeds.txtCheckedName = \"\";\n$success()"},"_auto_id_":"7803996f-5ff2-4f57-9d55-a9e8f07da376","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"notificationMed"},"_auto_id_":"60199ee1-b946-4339-b7bf-7dd9b41a9162"},{"event":"success","type":"go-to-page","data":{"name":"holdTTOMeds","isConditional":false},"_auto_id_":"a5be50e9-e1ae-4ec8-839a-ec06c63c6969"}]}],"expressions":{},"classes":"AddMedsBut","right-icon":"fa-check"}],"expressions":{}},{"name":"scrollableAddEDMeds_1","type":"area","item-type":"scrollable","_auto_id_":"0026b774-a33c-4c52-9f7e-dee03d051767","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"8c204748-d25f-47ef-abe0-9a0b6fb551e3","content":[{"name":"title_Medication_1","type":"content","item-type":"title","_auto_id_":"43ff9213-cee8-47fc-b49a-dcc516709775","content":"<h2>Add To Take Home Medication</h2>","expressions":{}},{"name":"grpDrugs_1","type":"area","item-type":"group","_auto_id_":"da399515-f780-4663-ae6f-cf407b8db644","content":[{"name":"dtGivenMeds","type":"component","item-type":"web-component","content":[],"componentId":"5feae92d-49d9-4329-abbf-52d9cdf7bffa","_auto_id_":"4062adc9-0265-438b-bd3f-56c2ef58a008","attributes":{"label":"Date Time Given"},"expressions":{},"actions":[]},{"name":"htmlEDMedDrugs","type":"content","item-type":"html","_auto_id_":"d0630760-4a78-412a-883e-ab883dea80df","content":"<div class=\"autocomplete\" style=\"width:100%;\">\n  <label class=\"control-label ng-binding\">Drug:</label></br>\n           <input id=\"DrugMed1TTO\" type=\"text\" name=\"myCountry\" placeholder=\"Drugs\">\n      <input type=\"hidden\" id=\"DrugMedTTO\" name=\"DrugMedTTO\" value=\"\">\n  </div>","expressions":{}},{"name":"selRoute","type":"choice","item-type":"select","_auto_id_":"71a00ea4-3693-4438-b5bb-c69a416f3b5b","label":"Route:","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDRoute","label-property":"Route","value-property":"Route"},{"name":"txtSite","type":"user-input","item-type":"text","_auto_id_":"e20ef63a-e697-4593-8236-26d945111491","label":"Site: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"rowDose","type":"area","item-type":"row","_auto_id_":"aebc8b47-1552-4002-975f-d934e0270ebc","content":[{"name":"numDose","type":"user-input","item-type":"number","_auto_id_":"57b9234f-41bd-40ca-affe-a728806b02fe","label":"Dose: ","required":false,"decimals":2,"expressions":{}},{"name":"selUnits","type":"choice","item-type":"select","_auto_id_":"0254d87e-cb1a-4a08-80a6-ff9a69cde4bc","label":"Units: ","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDDose","label-property":"Dose","value-property":"Dose"},{"name":"txtFreq","type":"user-input","item-type":"text","_auto_id_":"a674c842-6bc6-465f-9146-3148fe0e7199","label":"Frequency: ","required":false,"multiline":false,"debounce":250,"expressions":{}}],"expressions":{}},{"name":"txtComments","type":"user-input","item-type":"text","_auto_id_":"81c68f97-3f48-4844-bf4f-0ef2d2eb0d84","label":"Comments:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtPrescribeName","type":"user-input","item-type":"text","_auto_id_":"80188a48-7cb3-4da2-8d19-81d2da95550a","label":"Precribed By:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtAdminName","type":"user-input","item-type":"text","_auto_id_":"86f6cc35-a1a9-4b0e-b679-b6e2392dcaae","label":"Administered By: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtCheckedName","type":"user-input","item-type":"text","_auto_id_":"95377def-071a-4759-8a96-2744a6d630ec","label":"Checked By: ","required":false,"multiline":false,"debounce":250,"expressions":{}}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":false,"name":"EditTTOMeds","config":[{"name":"Page Load Event","type":"event","item-type":"onpageload","_auto_id_":"64dd49e1-bbe9-47ec-801f-e18956bae88c","actions":[{"event":"onpageload","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.EditTTOMeds.selRoute.label = cti.store.variables.TTORoute;\ncti.store.pages.EditTTOMeds.selRoute.value = cti.store.variables.TTORoute;\ncti.store.pages.EditTTOMeds.txtSite = cti.store.variables.TTOSite;\ncti.store.pages.EditTTOMeds.numDose = cti.store.variables.TTODose;\ncti.store.pages.EditTTOMeds.selUnits.label = cti.store.variables.TTOUnit;\ncti.store.pages.EditTTOMeds.selUnits.value = cti.store.variables.TTOUnit;\ncti.store.pages.EditTTOMeds.txtFreq = cti.store.variables.TTOFreq;\ncti.store.pages.EditTTOMeds.dtGivenMeds.time = cti.store.variables.TTODate;\ncti.store.pages.EditTTOMeds.txtComments = cti.store.variables.TTOComments;\ncti.store.pages.EditTTOMeds.txtPrescribeName = cti.store.variables.TTOPrescribeName;\ncti.store.pages.EditTTOMeds.txtAdminName = cti.store.variables.TTOAdminName;\ncti.store.pages.EditTTOMeds.txtCheckedName = cti.store.variables.TTOCheckedName;\ncti.store.pages.EditTTOMeds.sigChecked = cti.store.variables.TTOsigChecked;\n$success()"},"_auto_id_":"95009abc-8614-4db0-8dcf-dc3f605c5ecd"}]},{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"9a217964-a4ad-4555-829a-6291d0f87b89","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"\ncti.store.variables.Meds1 = [];\ncti.store.variables.Meds2 = \"\";\ncti.store.variables.Meds3 = \"\";\nif (cti.store.variables.GetEDMeds != null){\nfor(var i=0; i< cti.store.variables.GetEDMeds.length;)\n{\n    cti.store.variables.Meds1.push({\"Name\":cti.store.variables.GetEDMeds[i].dcDesc});\n   cti.store.variables.Meds2 = cti.store.variables.Meds2 + ''+cti.store.variables.GetEDMeds[i].dcDesc+'#,';\n       cti.store.variables.Meds3 = cti.store.variables.Meds3 + ''+cti.store.variables.GetEDMeds[i].dcDesc+'#,';\n  \ti=i+1;\n \n}\n}\n\nvar string = cti.store.variables.Meds2;\nvar array = string.split('#,');\n  cti.store.variables.Meds2 = array;\nvar string1 = cti.store.variables.Meds3;\nvar array1 = string1.split('#,');\n  cti.store.variables.Meds3 = array1;\n\n\nfunction autocomplete(inp, arr) {\n  /*the autocomplete function takes two arguments,\n  the text field element and an array of possible autocompleted values:*/\n  var currentFocus;\n  /*execute a function when someone writes in the text field:*/\n  inp.addEventListener(\"input\", function(e) {\n      var a, b, i, val = this.value;\n      /*close any already open lists of autocompleted values*/\n      closeAllLists();\n      if (!val) { return false;}\n      currentFocus = -1;\n      /*create a DIV element that will contain the items (values):*/\n      a = document.createElement(\"DIV\");\n      a.setAttribute(\"id\", this.id + \"autocomplete-list\");\n      a.setAttribute(\"class\", \"autocomplete-items\");\n      /*append the DIV element as a child of the autocomplete container:*/\n      this.parentNode.appendChild(a);\n      /*for each item in the array...*/\n      for (i = 0; i < arr.length; i++) {\n        /*check if the item starts with the same letters as the text field value:*/\n                 var str = arr[i].toUpperCase();\n  var patt = new RegExp(val.toUpperCase());\n  var res = patt.test(str);\n      if (res == true) {\n          b = document.createElement(\"DIV\");\n\n  b.innerHTML += arr[i];\n          b.innerHTML += \"<input type='hidden' value='\" + arr[i] + \"'>\";\n           b.addEventListener(\"click\", function(e) {\n              inp.value = this.getElementsByTagName(\"input\")[0].value;\n                      for (var j = 0; j < cti.store.variables.Meds3.length;) {\n \t\t\t if (cti.store.variables.Meds2[j] == inp.value){        \n               document.getElementById(\"EditTTODrugMed\").value =  cti.store.variables.Meds3[j];\n                  }\n \t \t\t\t\tj=j+1;\n\t\t\t\t}\n             closeAllLists();\n          });\n          a.appendChild(b);\n        }\n      }\n  });\n  /*execute a function presses a key on the keyboard:*/\n  inp.addEventListener(\"keydown\", function(e) {\n      var x = document.getElementById(this.id + \"autocomplete-list\");\n      if (x) x = x.getElementsByTagName(\"div\");\n      if (e.keyCode == 40) {\n        /*If the arrow DOWN key is pressed,\n        increase the currentFocus variable:*/\n        currentFocus++;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 38) { //up\n        /*If the arrow UP key is pressed,\n        decrease the currentFocus variable:*/\n        currentFocus--;\n        /*and and make the current item more visible:*/\n        addActive(x);\n      } else if (e.keyCode == 13) {\n        /*If the ENTER key is pressed, prevent the form from being submitted,*/\n        e.preventDefault();\n        if (currentFocus > -1) {\n          /*and simulate a click on the \"active\" item:*/\n          if (x) x[currentFocus].click();\n        }\n      }\n  });\n  function addActive(x) {\n    /*a function to classify an item as \"active\":*/\n    if (!x) return false;\n    /*start by removing the \"active\" class on all items:*/\n    removeActive(x);\n    if (currentFocus >= x.length) currentFocus = 0;\n    if (currentFocus < 0) currentFocus = (x.length - 1);\n    /*add class \"autocomplete-active\":*/\n    x[currentFocus].classList.add(\"autocomplete-active\");\n  }\n  function removeActive(x) {\n    /*a function to remove the \"active\" class from all autocomplete items:*/\n    for (var i = 0; i < x.length; i++) {\n      x[i].classList.remove(\"autocomplete-active\");\n    }\n  }\n  function closeAllLists(elmnt) {\n    /*close all autocomplete lists in the document,\n    except the one passed as an argument:*/\n    var x = document.getElementsByClassName(\"autocomplete-items\");\n    for (var i = 0; i < x.length; i++) {\n      if (elmnt != x[i] && elmnt != inp) {\n        x[i].parentNode.removeChild(x[i]);\n      }\n    }\n  }\n  /*execute a function when someone clicks in the document:*/\n  document.addEventListener(\"click\", function (e) {\n      closeAllLists(e.target);\n  });\n}\n\nvar DiagArray =cti.store.variables.Meds2 ;\n\n/*initiate the autocomplete function on the \"myInput\" element, and pass along the countries array as possible autocomplete values:*/\nautocomplete(document.getElementById(\"EditTTODrugMed1\"), DiagArray);\ndocument.getElementById(\"EditTTODrugMed1\").value = cti.store.variables.Drug;"},"_auto_id_":"27b3fdd8-1503-4c72-aaa2-4f1daf1e800d"}]}],"content":[{"name":"titBarEDSAddMeds","type":"area","item-type":"title-bar","_auto_id_":"74677342-0934-4982-b8e2-c0bcc065a0a3","extends":{"type":"area","item-type":"row"},"content":[{"name":"butBack","type":"button","item-type":"button","_auto_id_":"a6a3fe7c-d11d-42e7-b378-5fc4634068b3","content":"","theme":"default","left-icon":"fa-arrow-left","expressions":{},"classes":"AddMedsBut","actions":[{"event":"click","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"80c15e90-1a69-4fc0-a0cf-ae8aa8be2b01"}]},{"name":"titEDSMedsAdd","type":"content","item-type":"title","_auto_id_":"70f4129f-700f-4891-91ee-b3cbd9c27dbf","content":"<h1>Edit TTO Medication</h1>","expressions":{}},{"name":"butEditMeds","type":"button","item-type":"button","_auto_id_":"7225c7f1-2358-4e3e-8831-e5328b493d8a","content":"","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"for (var i = 0; i < cti.store.variables.TTOMeds.length;) {\n  if (cti.store.variables.TTOMeds[i].TTOMedID == cti.store.variables.TTOMedID)\n        cti.store.variables.TTOMeds.splice(cti.store.variables.TTOMedID,1);\n  \t\ti=i+1;\n}\n\nTTOMedID = cti.store.variables.TTOMedID;\n\n//save the data\ncti.store.variables.TTOMeds.push({\"TTOMedID\":TTOMedID,\"Drug\":document.getElementById(\"EditTTODrugMed1\").value, \"Route\":cti.store.pages.EditTTOMeds.selRoute.label, \"Site\":cti.store.pages.EditTTOMeds.txtSite, \"Dose\":cti.store.pages.EditTTOMeds.numDose, \"Unit\":cti.store.pages.EditTTOMeds.selUnits.label, \"Freq\":cti.store.pages.EditTTOMeds.txtFreq, \"Date\":cti.store.pages.EditTTOMeds.dtGivenMeds.time, \"Comments\":cti.store.pages.EditTTOMeds.txtComments, \"PrescribeName\":cti.store.pages.EditTTOMeds.txtPrescribeName,\"AdminName\":cti.store.pages.EditTTOMeds.txtAdminName,\"CheckedName\":cti.store.pages.EditTTOMeds.txtCheckedName});\n$success()"},"_auto_id_":"c2c155db-470a-44a2-baf7-feac9f6f88d2","actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"notificationMed","title":"Medication Updated"},"_auto_id_":"092a1a15-a1e2-454c-b31b-c1eca9e960af"},{"event":"success","type":"go-to-page","data":{"name":"Medications","isConditional":false},"_auto_id_":"ea26ecda-d14b-49b4-80c3-2b210b45e918"}]}],"expressions":{},"classes":"AddMedsBut","right-icon":"fa-check"}],"expressions":{}},{"name":"scrollableAddEDMeds_1","type":"area","item-type":"scrollable","_auto_id_":"1bc4edc4-f9e8-4f05-a7ba-121ee2a457a8","content":[{"name":"groupSummary_1","type":"area","item-type":"group","_auto_id_":"ac19a5c0-ffce-4800-bcc5-fa952f8525c6","content":[{"name":"title_Medication_1","type":"content","item-type":"title","_auto_id_":"74d2ddf9-9185-40b5-a8b2-8770942d51bd","content":"<h2>Edit To Take Home Medication</h2>","expressions":{}},{"name":"grpDrugs_1","type":"area","item-type":"group","_auto_id_":"8482d32d-ae03-4227-ae17-58c1ebb9e62b","content":[{"name":"dtGivenMeds","type":"component","item-type":"web-component","content":[],"componentId":"5feae92d-49d9-4329-abbf-52d9cdf7bffa","_auto_id_":"99c78ef5-3fcb-43ce-a0b3-cb313d072094","attributes":{"label":"Date Time Given"},"expressions":{},"actions":[]},{"name":"htmlMedDrugs","type":"content","item-type":"html","_auto_id_":"b121e1ef-7804-45a3-ad4e-5db3a6bd986f","content":"<div class=\"autocomplete\" style=\"width:100%;\">\n  <label class=\"control-label ng-binding\">Drug:</label></br>\n           <input id=\"EditTTODrugMed1\" type=\"text\" name=\"myCountry\" placeholder=\"Drugs\">\n      <input type=\"hidden\" id=\"EditTTODrugMed\" name=\"EditTTODrugMed\" value=\"\">\n  </div>","expressions":{}},{"name":"selRoute","type":"choice","item-type":"select","_auto_id_":"8659f2e0-7137-4d8d-b49f-72f05c28d562","label":"Route:","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDRoute","label-property":"Route","value-property":"Route"},{"name":"txtSite","type":"user-input","item-type":"text","_auto_id_":"8638b731-6c4b-418e-8005-138091810a78","label":"Site: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"rowDose","type":"area","item-type":"row","_auto_id_":"106fa400-856e-4f63-8c73-101596baa5f1","content":[{"name":"numDose","type":"user-input","item-type":"number","_auto_id_":"6a459e3a-1979-4750-935b-1f9e7e57cb7a","label":"Dose: ","required":false,"decimals":2,"expressions":{}},{"name":"selUnits","type":"choice","item-type":"select","_auto_id_":"8bae592a-3ca8-47be-bed7-bd26cbc2c1e2","label":"Units: ","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{},"option-source":"$store.variables.GetEDDose","label-property":"Dose","value-property":"Dose"},{"name":"txtFreq","type":"user-input","item-type":"text","_auto_id_":"2de31c80-b62d-4ee0-8c66-811aab722608","label":"Frequency: ","required":false,"multiline":false,"debounce":250,"expressions":{}}],"expressions":{}},{"name":"txtComments","type":"user-input","item-type":"text","_auto_id_":"5fbdfd4c-7185-4a45-9adc-3052a0c3d4ab","label":"Comments:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtPrescribeName","type":"user-input","item-type":"text","_auto_id_":"6b21ed49-9c9e-4d11-a0a9-a84625d7586a","label":"Precribed By:","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtAdminName","type":"user-input","item-type":"text","_auto_id_":"c6f1e8fd-935b-4c59-8738-bd9d14c0fb8e","label":"Administered By: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"txtCheckedName","type":"user-input","item-type":"text","_auto_id_":"7bf66bca-dbf2-4086-85ba-f4ddb9d49d99","label":"Checked By: ","required":false,"multiline":false,"debounce":250,"expressions":{}},{"name":"butRemoveEDMed","type":"button","item-type":"button","_auto_id_":"130e05cb-221b-4435-b541-99a49b49509f","content":"","theme":"default","expressions":{},"left-icon":"fa-trash","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"for (var i = 0; i < cti.store.variables.TTOMeds.length;) {\n  if (cti.store.variables.TTOMeds[i].TTOMedID == cti.store.variables.TTOMedID)\n        cti.store.variables.TTOMeds.splice(cti.store.variables.TTOMedID,1);\n  \t\ti=i+1;\n}\n\nfor (var i = 0; i < cti.store.variables.TTOMeds.length;) {\n\tif (cti.store.variables.TTOMeds[i].TTOMedID >0)\n\t\tcti.store.variables.TTOMeds[i].TTOMedID = cti.store.variables.TTOMeds[i].TTOMedID-1;\n\t\ti=i+1;\n\t}"},"_auto_id_":"ad015803-f61a-4a92-bc5b-3124e4ce25cb"}],"classes":"RemoveMedsBut"}],"repeat":false,"expressions":{},"classes":"drugGroup"}],"repeat":false,"expressions":{},"classes":""}],"expressions":{}}]},{"start":false,"name":"holdTTOMeds","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"f67c7d00-90b5-43f7-8635-8fd02b764216","actions":[{"event":"onpageloaded","type":"go-to-page","data":{"name":"AddTTOMeds","isConditional":false},"_auto_id_":"1ff07f32-9466-4972-9a25-6b46080b2a4a"}]}],"content":[{"name":"scrollable_6","type":"area","item-type":"scrollable","_auto_id_":"1c0e372f-cfc8-4c00-b57e-7ae10295fec7","content":[{"name":"html_1","type":"content","item-type":"html","_auto_id_":"41325535-2512-4bdc-aefd-fe1874db41cb","content":"<h2>Added</h2>"}]}]}],"actionflows":[],"dataflows":[],"config":[{"name":"App Load Event","type":"event","item-type":"onappload","_auto_id_":"e9cc8795-ce3d-459d-adca-7fcaaf93a3cd","actions":[{"event":"onappload","type":"go-to-page","data":{"name":"Ready","isConditional":false},"_auto_id_":"5dac55f4-5e59-49de-ad6b-563da419955f"}]},{"name":"jsMoment","type":"scripting","item-type":"js-asset","_auto_id_":"d0781708-a33f-475a-837d-d18790222ebb","fileName":"moment.min.js"},{"name":"js_asset_2","type":"scripting","item-type":"js-asset","_auto_id_":"bd9f80ee-84b6-4098-a2ff-bef6b852d80e","fileName":"bootstrap.min 1.js"},{"name":"jsDateTimePicker_1","type":"scripting","item-type":"js-asset","_auto_id_":"a51af7de-1fec-417e-8290-097725e7edf9","fileName":"bootstrap-datetimepicker 1.js"},{"name":"css_asset_3","type":"style","item-type":"css-asset","_auto_id_":"d4e07092-953b-47ff-b7fa-43e068bdbf51","fileName":"Autocomplete1 1.css"},{"name":"font_asset_1","type":"style","item-type":"font-asset","_auto_id_":"7612d074-060a-49fe-9460-dc654e73663b","fileName":"glyphicons-halflings-regular.woff"},{"name":"font_asset_2","type":"style","item-type":"font-asset","_auto_id_":"9523041f-4ee8-461f-a120-10d289fdda02","fileName":"glyphicons-halflings-regular.ttf"},{"name":"font_asset_3","type":"style","item-type":"font-asset","_auto_id_":"0aec5595-c4e2-4992-b2cd-9e34f78c55b8","fileName":"password.ttf"},{"name":"cssBootstrap_1","type":"style","item-type":"css-asset","_auto_id_":"bc25f280-4322-46d7-b708-cb9067b5ffcb","fileName":"bootstrap.min.css"},{"name":"incorrectLogin","type":"notification","item-type":"app-notification","_auto_id_":"47ae7c5c-5bb7-4867-8b89-7d7caff6e7be","options":{"closeButton":true,"autoDismiss":true},"style":"error","actions":[],"text":"Login details are incorrect please try again"},{"name":"Saved","type":"notification","item-type":"app-notification","_auto_id_":"24700112-334f-4c39-adeb-7151e89a7b76","options":{"autoDismiss":true},"style":"success","title":"Saved"},{"name":"LoginState","type":"notification","item-type":"app-notification","_auto_id_":"ab562b27-4c34-445f-b6cb-795aa3201e91","options":{"progressBar":true,"autoDismiss":true,"closeButton":true},"style":"success","title":"Login Sucessful","text":"Welcome","actions":[]},{"name":"LoginFail","type":"notification","item-type":"app-notification","_auto_id_":"9d8d1085-c640-4345-ba23-1651740300a2","options":{"progressBar":true,"autoDismiss":true,"closeButton":true},"style":"error","title":"Login UnSuccessful","text":"Please Check Username and Password","actions":[]},{"name":"patSearch","type":"integration","item-type":"api","_auto_id_":"07e45589-93fa-4acc-adbd-65d1bf3216cc","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"MpiSearch","summary":"MpiSearch","path":"MpiSearch","method":"POST","$open":true,"content-type":"application/json","params":[{"name":"manor","description":"manor","type":"string","typeConfig":{},"in":"body","required":true}]}],"url":"https://commontimeapi.walsall.nhs.uk:8443/"},{"name":"Demographics","type":"integration","item-type":"api","_auto_id_":"94e8ecb2-804d-480d-8008-14af01efa29c","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"EDMpiDemogs","summary":"Get Demographics","path":"EDMpiDemogs","method":"POST","content-type":"application/json","params":[{"name":"manor","description":"manor number","type":"string","typeConfig":{},"in":"body","default":"","required":true}],"$open":true}],"url":"https://commontimeapi.walsall.nhs.uk:8443/"},{"name":"Form","type":"integration","item-type":"api","_auto_id_":"0db82a4d-6d95-4c46-8d05-4481600b1623","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"edEDSGetFormData","summary":"GetFormData","path":"edEDSGetFormData","method":"POST","content-type":"application/json","params":[{"name":"formID","description":"formID","type":"string","typeConfig":{},"in":"body","required":false},{"name":"manor","description":"manor","type":"string","typeConfig":{},"in":"body"}],"$open":false},{"ttlMinutes":60,"name":"edEDSGetForms","summary":"GetForms","path":"edEDSGetForms","method":"POST","content-type":"application/json","params":[{"name":"manor","description":"manor","type":"string","typeConfig":{},"in":"body"}],"$open":false},{"ttlMinutes":60,"name":"edEDSMpiSearchNew","summary":"MpiSearchNew","path":"edEDSMpiSearchNew","method":"POST","content-type":"application/json","params":[{"name":"manor","description":"manor","type":"string","typeConfig":{},"in":"body"},{"name":"nhs","description":"nhs","type":"string","typeConfig":{},"in":"body"},{"name":"firstname","description":"firstname","type":"string","typeConfig":{},"in":"body"},{"name":"lastname","description":"lastname","type":"string","typeConfig":{},"in":"body"},{"name":"sex","description":"sex","type":"string","typeConfig":{},"in":"body"},{"name":"dob","description":"dob","type":"string","typeConfig":{},"in":"body"},{"name":"postcode","description":"postcode","type":"string","typeConfig":{},"in":"body"}],"$open":true},{"ttlMinutes":60,"name":"EDSSaveForm","summary":"Save Form","path":"EDSSaveForm","method":"POST","content-type":"application/json","$open":true,"params":[{"name":"formID","description":"formID","type":"string","typeConfig":{},"in":"body","required":true},{"name":"Allergies","description":"Allergies","type":"string","typeConfig":{},"in":"body"},{"name":"Comments","description":"Comments","type":"string","typeConfig":{},"in":"body"},{"name":"EDMeds","description":"EDMeds","type":"string","typeConfig":{},"in":"body"},{"name":"TTOMeds","description":"TTOMeds","type":"string","typeConfig":{},"in":"body"},{"name":"DisMeds","description":"DisMeds","type":"string","typeConfig":{},"in":"body"},{"name":"username","description":"username","type":"string","typeConfig":{},"in":"body"},{"name":"PrescMeds","description":"PrescMeds","type":"string","typeConfig":{},"in":"body"}]},{"ttlMinutes":60,"name":"GetEDList","summary":"GetEDList","path":"GetEDList","method":"POST","content-type":"application/json","$open":true},{"ttlMinutes":60,"name":"EDSComplete","summary":"EDSComplete","path":"EDSComplete","method":"POST","content-type":"application/json","params":[{"name":"formID","description":"formID","type":"string","typeConfig":{},"in":"body","required":true}]}],"url":"https://commontimeapi.walsall.nhs.uk:8443/"},{"name":"Lookups","type":"integration","item-type":"api","_auto_id_":"64bd18cb-f368-4e50-855c-6b32d9b9f2a4","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"LKWards","summary":"Get list of wards","path":"LKWards","method":"POST","$open":true,"content-type":"application/json","params":[]},{"ttlMinutes":60,"name":"LKCons","summary":"Get Consultant List","path":"LKCons","method":"POST","content-type":"application/json"},{"ttlMinutes":60,"name":"GetMeds","summary":"Get list of medications","path":"Meds","method":"POST","content-type":"application/json","$open":true},{"ttlMinutes":60,"name":"MedFreq","summary":"Meds Frequency","path":"Frequency","method":"POST","content-type":"application/json","$open":true},{"ttlMinutes":60,"name":"GetEDMeds","summary":"GetEDMeds","path":"GetEDMeds","method":"POST","content-type":"application/json"},{"ttlMinutes":60,"name":"GetEDDose","summary":"GetEDDose","path":"GetEDDose","method":"POST","content-type":"application/json"},{"ttlMinutes":60,"name":"GetEDRoute","summary":"GetEDRoute","path":"GetEDRoute","method":"POST","content-type":"application/json"}],"url":"https://commontimeapi.walsall.nhs.uk:8443/"},{"name":"varGotMeds","type":"scripting","item-type":"variable","_auto_id_":"548e0ca9-323b-4eee-98a4-8b74d460d401","variable-type":"string"},{"name":"EDMedID","type":"scripting","item-type":"variable","_auto_id_":"8a2fe4c7-c328-4d6c-9f98-a695be6806de","variable-type":"int"},{"name":"todaysDate_1","type":"scripting","item-type":"variable","_auto_id_":"0a730944-dfbe-4d1a-bba8-9d7c2947ab4e","variable-type":"string"},{"name":"css_asset_1","type":"style","item-type":"css-asset","_auto_id_":"b9eb2225-65f1-422a-b543-0bc28205e6e4","fileName":"bootstrap-datetimepicker.css"},{"name":"cssEDMedsAllergies","type":"style","item-type":"css-asset","_auto_id_":"e479d1d7-4644-4451-9743-53349a8e72c7","fileName":"EDMeds.css"},{"name":"formID","type":"scripting","item-type":"variable","_auto_id_":"ada75e04-37e1-463b-9011-4a61cd20ae75","variable-type":"string"},{"name":"manor","type":"scripting","item-type":"variable","_auto_id_":"dbf99ba8-acc3-454c-ad6b-2254ee21b8d3","variable-type":"string"},{"name":"varReportID","type":"scripting","item-type":"variable","_auto_id_":"f4794cfc-dd44-42ab-b942-4d6002fc2758","variable-type":"string"},{"name":"pacsID","type":"scripting","item-type":"variable","_auto_id_":"7fad0e9d-03c8-4643-a359-af87139ac243","variable-type":"string"},{"name":"varPDFLink","type":"scripting","item-type":"variable","_auto_id_":"0f1db258-f4f2-4f55-8be6-02241e31a4f1","variable-type":"string"},{"name":"page","type":"scripting","item-type":"variable","_auto_id_":"5b2cb2be-e70c-4f21-9493-baf099b1a0c8","variable-type":"string"},{"name":"Username","type":"scripting","item-type":"variable","_auto_id_":"011bdd79-930e-430a-9e9b-0bb368062d8d","variable-type":"string"},{"name":"LoggedIn","type":"scripting","item-type":"variable","_auto_id_":"c81ce617-384d-48c7-9e18-e62e0b059b61","variable-type":"string"},{"name":"AutoUser","type":"scripting","item-type":"variable","_auto_id_":"592635bb-51ff-4d15-988f-43de9e2ef3ca","variable-type":"string"},{"name":"Password","type":"scripting","item-type":"variable","_auto_id_":"075bf941-0994-4e8f-9f9f-f048ee390fb9","variable-type":"string"},{"name":"AutoLogin","type":"scripting","item-type":"variable","_auto_id_":"7d938458-73fc-4f87-85a3-f035a3e119e8","variable-type":"string","value":"T"},{"name":"app_notification_1","type":"notification","item-type":"app-notification","_auto_id_":"5c7b0fa4-80cf-482a-9f79-0d17bd6ce4f2","options":{"closeButton":true},"style":"success","title":"Oops","text":"We ran into a problem, please try again and if the issue persists log with the IT service desk","actions":[]},{"name":"Graphnet","type":"integration","item-type":"api","_auto_id_":"09b812ad-f63b-4a02-9eef-cd5fdc00a319","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"GetGraphnetToken1","summary":"GetGraphnetToken1","path":"GetGraphnetToken1","method":"POST","content-type":"application/json","$open":true},{"ttlMinutes":60,"name":"GetGraphnetAllergies","summary":"GetGraphnetAllergies","path":"GetGraphnetAllergies","method":"POST","content-type":"application/json"},{"ttlMinutes":60,"name":"GetGraphnetMeds","summary":"GetGraphnetMeds","path":"GetGraphnetMeds","method":"POST","content-type":"application/json"},{"ttlMinutes":60,"name":"GetGraphnetRepMeds","summary":"GetGraphnetRepMeds","path":"GetGraphnetRepMeds","method":"POST","content-type":"application/json"}],"url":"https://commontimeapi.walsall.nhs.uk:8443/"},{"name":"Login","type":"integration","item-type":"api","_auto_id_":"9fe23d61-8389-4cca-b529-b7c99d5fcaab","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"UserAuth","summary":"UserAuth","path":"UserAuth","method":"POST","content-type":"application/json","params":[{"name":"username","description":"username","type":"string","typeConfig":{},"in":"body"},{"name":"password","description":"password","type":"string","typeConfig":{},"in":"body"}],"$open":true},{"ttlMinutes":60,"name":"LogUser","summary":"LogUser","path":"LogUser","method":"POST","content-type":"application/json","params":[{"name":"UserName","description":"UserName","type":"string","typeConfig":{},"in":"body"},{"name":"App","description":"App","type":"string","typeConfig":{},"in":"body"}],"$open":true},{"ttlMinutes":60,"name":"UserCheck","summary":"UserCheck","path":"UserCheck","method":"POST","content-type":"application/json","params":[{"name":"username","description":"username","type":"string","typeConfig":{},"in":"body"}],"$open":true}],"url":"https://commontimeapi.walsall.nhs.uk:8443/","definitions":{}},{"name":"RhapAPI","type":"integration","item-type":"api","_auto_id_":"e46f5665-46f8-4af3-9d6c-0eaadec2cf8c","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"Username","summary":"Username","path":"request.asp","method":"POST","content-type":"application/x-www-form-urlencoded","$open":true,"params":[{"name":"Password","description":"Password","type":"string","typeConfig":{},"in":"body"},{"name":"Username","description":"Username","type":"string","typeConfig":{},"in":"body"},{"name":"type","description":"type","type":"string","typeConfig":{},"in":"body","default":"FusionLogin","required":true}]}],"url":"https://hippo2.walsall.nhs.uk/inc/"},{"name":"notificationMed","type":"notification","item-type":"app-notification","_auto_id_":"61f7de09-4a17-4186-8ce3-d8e162c6b24d","options":{"autoDismiss":true},"style":"success","title":"Medication Added","actions":[]},{"name":"patientnotfound","type":"notification","item-type":"app-notification","_auto_id_":"3a529aef-f435-4a6b-91ab-c059c02d5259","options":{"autoDismiss":true,"closeButton":true},"style":"error","text":"Patient not found","actions":[]}],"components":[{"name":"timedate","description":"","icon":"fa-puzzle-piece","_auto_id_":"83cf629a-13c1-430c-88be-ad729528dc93","tagName":"time-picker","type":"web-component","format":"javascript","typeVersion":"1","annotations":{"attributes":[{"name":"label","description":"","type":"string","enum":null,"required":true}],"properties":[{"name":"time","getter":true,"setter":true,"modelConfig":{"store":true,"changeEvents":["change"]},"getterDescription":"Get the time","returnType":"string","returnEnum":null,"setterDescription":"Set the time","valueType":"string","valueEnum":null}]},"userConfig":{"properties":{"time":{}}},"valid":true,"files":{"original":"timedate.js","transpiled":"timedate.output.js"}},{"name":"datewithtime","description":"","icon":"fa-puzzle-piece","_auto_id_":"5feae92d-49d9-4329-abbf-52d9cdf7bffa","tagName":"datetime-picker","type":"web-component","format":"javascript","typeVersion":"1","annotations":{"attributes":[{"name":"label","description":"","type":"string","enum":null,"required":true}],"properties":[{"name":"time","getter":true,"setter":true,"modelConfig":{"store":true,"changeEvents":["change"]},"getterDescription":"Get the time","returnType":"string","returnEnum":null,"setterDescription":"Set the time","valueType":"string","valueEnum":null}]},"userConfig":{"properties":{"time":{}}},"valid":true,"files":{"original":"datewithtime.js","transpiled":"datewithtime.output.js"}}],"lastSchemaUpgradeDate":"2021-06-01 10:23:33","jwt":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBfaWQiOiJiZGE4MjU3Mi1jNjNiLTQ4Y2MtYWI5My04YzE4YTNlZTg1ZmYiLCJhcHBfbmFtZSI6Ik1lZHNBbGxlcmdpZXN2OSIsImJ1aWxkX2lkIjoiZjI1YzE3YTUtMmJiMS00YjgxLWI0MGQtNmU5MDBhZjM0ZDBlIiwiY2xpZW50X2lkIjoiMzk2ZTg5ZTctZDllMi00MjYzLWE0NWQtYzFjYjY1OTVmNGQ3IiwiY2xpZW50X3NlY3JldCI6Ik1HeHRVREZ5UkRBMlFYVlllRFJRU0VNelZVZHBRVDA5IiwiZXhwIjoxNjYxOTkwMzk5LCJmcmVxdWVuY3kiOjIxNjAwMDAwMCwiaGFzaCI6ImE2YjFkYjYzY2I3OWE5ZGU3MGExNzAyMjI0ZmJiY2UzNjM0NTAzZmQzOTcwNTM2ZmZiM2VmM2I3NzE2NDE5MDMiLCJsaWNfZXhwIjoxNjU5Mzk4Mzk5LCJscF9pZCI6IjhlMWU3NmZjLWI0MWQtNGNiYy1iMWUwLWRhYmI2YzI5MzNkZSIsInBhY2thZ2VfaWQiOiJjb20uY29tbW9udGltZS5pbmZpbml0eS5UZXN0IiwicmVmcmVzaF90b2tlbiI6ImJUTTFhbWw0Y0RGRVUyOU5UMFJpU1daVFIxaHJOakkzVW1seFltWmpZVTlYTDNKTmRGUlBUeXR6YnowPSIsInR5cGUiOiJmdWxsIiwiaWF0IjoxNjM2NzMxMzg3fQ.pxPDmfvyS-2OvzxBMSJekEmpAiaoVV-CgHO15KFu7-4tl5aSOhNkDF8ncFlw7hB3q4ttMi4hle8cDGN83LDESfFs4YAMANuIXJh-aPuJlnaGDpSrgw3--rYEdAug5ojppdseKoAQ8CA8hHFpFpyB3LRAQvOiAJ6pYBKMgvcF8jLhFvOn2jYMa9mNbe4o4EhTs9iJ3685wdqUkITQ8PE8RYnwmNNB8YbP4ECWgUS1RL6gbaJxF5XLvesJ2BKoUMO8Q8tW8kZ9kfZWGfQfKFnk1DXdmmgBUF_CyPVAqD1_HkypZmCX1BVT83SxA47hcnrN-i343bMawo5lf9_Fz_0ozA","buildId":"f25c17a5-2bb1-4b81-b40d-6e900af34d0e","displayName":"MedsAllergiesv9","hostContext":0}